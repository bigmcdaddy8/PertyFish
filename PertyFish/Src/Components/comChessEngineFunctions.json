{
  "ComponentAllowCustomization": true,
  "ComponentChangedSinceFileImport": true,
  "ComponentDefinitionInfo": {
    "AllowAccessToGlobals": true,
    "Children": [],
    "ControlPropertyState": [
      "Fill",
      "Height",
      "Width",
      "X",
      "Y",
      "ZIndex",
      {
        "AFDDataSourceName": "",
        "AutoRuleBindingEnabled": false,
        "AutoRuleBindingString": "100",
        "InvariantPropertyName": "fME_EvaluateMove_pNodeID",
        "IsLockable": false,
        "NameMapSourceSchema": "?"
      },
      {
        "AFDDataSourceName": "",
        "AutoRuleBindingEnabled": false,
        "AutoRuleBindingString": "",
        "InvariantPropertyName": "fME_EvaluateMove",
        "IsLockable": false,
        "NameMapSourceSchema": "?"
      },
      "fCE_100_pNodeID",
      {
        "AFDDataSourceName": "",
        "AutoRuleBindingEnabled": false,
        "AutoRuleBindingString": "\nIf(gblPF_DEBUG_EVAL,\n    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n        \" comChessEngineFunctions.fME_Random(): entered pNodeID: \" & pNodeID\n    })\n);\n\nWith(\n    LookUp(colPF_DYNAMIC_DATA, dataName=DYNAMIC_DATA_PF_NAME) As theData,\n\n    With(\n        LookUp(colPF_MOVE_TREE, nodeID=pNodeID) As theCurrentNode,\n\n        If(gblPF_DEBUG_EVAL,\n            Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                \" fME_Random(): san: \" & theCurrentNode.inactiveColorMoveRecord.san &\n                \" pacn: \" & theCurrentNode.inactiveColorMoveRecord.pacn &\n                \" move color: \" & UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN) &\n                \" captureSquareOccupier: \" & theCurrentNode.inactiveColorMoveRecord.captureSquareOccupier\n            })\n        );\n\n        Patch(colPF_MOVE_TREE, First(Filter(colPF_MOVE_TREE, nodeID=pNodeID)), {\n            postMoveEvalRecord: \n                Patch(EVAL_RECORD_PF, {\n                    heuristic01:\n                        0,\n                    heuristic02:\n                        0,\n                    heuristic05:\n                        0,\n                    heuristic11:\n                        0,\n                    heuristic12:\n                        0,\n                    heuristic13:\n                        0,\n                    heuristic14:    \n                        0,\n                    heuristic16:\n                        0,\n                    heuristic17:\n                        0,\n                    heuristic18:\n                        0,\n                    // a pinch of randomness\n                    heuristic19:\n                        RandBetween(-25,25)  // centipawns \n                })\n        });\n\n        UpdateIf(colPF_MOVE_TREE, nodeID=pNodeID, {\n            postMoveEvalRecord: \n                Patch(LookUp(colPF_MOVE_TREE, nodeID=pNodeID).postMoveEvalRecord, {\n                    centipawn:\n                        With(\n                            LookUp(colPF_MOVE_TREE, nodeID=pNodeID) As theCurrentNodeUpdated,\n                            \n                            If(gblPF_DEBUG_EVAL,\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic01 (basic positioning) SUM BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic01\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic02 ME end game: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic02\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic05 (Hanging Piece Tactic) SUM BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic05\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic11 generic tactics BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic11\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic12 fork tactic BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic12\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic13 move to/from protection BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic13\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic14 castling BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic14\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic16 BNP moves in opening sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic16\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic17 passed PAWN BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic17\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic18 Post Square Table (PST) BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic18\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic19 the God of Randomness BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic19\n                                })\n                            );\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic01 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic02 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic03 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic04 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic05 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic06 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic07 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic08 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic09 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic10 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic11 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic12 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic13 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic14 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic15 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic16 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic17 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic18 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic19\n                        )\n                })\n        })\n    );\n\n    If(gblPF_DEBUG_EVAL,\n        With(\n            LookUp(colPF_MOVE_TREE, nodeID=pNodeID) As theCurrentNode,\n\n            Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                \" fME_Random(): san: \" & theCurrentNode.inactiveColorMoveRecord.san &\n                \" pacn: \" & theCurrentNode.inactiveColorMoveRecord.pacn &\n                \" centipawn: \" & theCurrentNode.postMoveEvalRecord.centipawn\n            })\n        )\n    )\n);\n\nCollect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \" fME_Random(): exiting\"});\n",
        "InvariantPropertyName": "fCE_100",
        "IsLockable": false,
        "NameMapSourceSchema": "?"
      },
      {
        "AFDDataSourceName": "",
        "AutoRuleBindingEnabled": false,
        "AutoRuleBindingString": "\nIf(gblPF_DEBUG_EVAL,\n    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n        \" comChessEngineFunctions.fCE_100(): entered pNodeID: \" & pNodeID\n    })\n);\n\nWith(\n    LookUp(colPF_DYNAMIC_DATA, dataName=DYNAMIC_DATA_PF_NAME) As theData,\n\n    With(\n        LookUp(colPF_MOVE_TREE, nodeID=pNodeID) As theCurrentNode,\n\n        If(gblPF_DEBUG_EVAL,\n            Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                \" fCE_100(): san: \" & theCurrentNode.inactiveColorMoveRecord.san &\n                \" pacn: \" & theCurrentNode.inactiveColorMoveRecord.pacn &\n                \" move color: \" & UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN) &\n                \" captureSquareOccupier: \" & theCurrentNode.inactiveColorMoveRecord.captureSquareOccupier\n            })\n        );\n\n        Patch(colPF_MOVE_TREE, First(Filter(colPF_MOVE_TREE, nodeID=pNodeID)), {\n            postMoveEvalRecord: \n                Patch(EVAL_RECORD_PF, {\n                    heuristic01:\n                        0,\n                    heuristic02:\n                        0,\n                    heuristic05:\n                        0,\n                    heuristic11:\n                        0,\n                    heuristic12:\n                        0,\n                    heuristic13:\n                        0,\n                    heuristic14:    \n                        0,\n                    heuristic16:\n                        0,\n                    heuristic17:\n                        0,\n                    heuristic18:\n                        0,\n                    heuristic19:\n                        If(UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN)=WHITE,\n                            If(theCurrentNode.inactiveColorMoveRecord.captureSquareNum<>EMPTY_SQUARE_NUM, RandBetween(0,25), RandBetween(-25,0)),\n                            If(theCurrentNode.inactiveColorMoveRecord.captureSquareNum<>EMPTY_SQUARE_NUM, RandBetween(-25,0), RandBetween(0,25))\n                        )\n                })\n        });\n\n        UpdateIf(colPF_MOVE_TREE, nodeID=pNodeID, {\n            postMoveEvalRecord: \n                Patch(LookUp(colPF_MOVE_TREE, nodeID=pNodeID).postMoveEvalRecord, {\n                    centipawn:\n                        With(\n                            LookUp(colPF_MOVE_TREE, nodeID=pNodeID) As theCurrentNodeUpdated,\n                            \n                            If(gblPF_DEBUG_EVAL,\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic01 (basic positioning) SUM BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic01\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic02 ME end game: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic02\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic05 (Hanging Piece Tactic) SUM BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic05\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic11 generic tactics BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic11\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic12 fork tactic BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic12\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic13 move to/from protection BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic13\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic14 castling BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic14\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic16 BNP moves in opening sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic16\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic17 passed PAWN BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic17\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic18 Post Square Table (PST) BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic18\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic19 the God of Randomness BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic19\n                                })\n                            );\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic01 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic02 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic03 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic04 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic05 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic06 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic07 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic08 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic09 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic10 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic11 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic12 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic13 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic14 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic15 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic16 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic17 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic18 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic19\n                        )\n                })\n        })\n    );\n\n    If(gblPF_DEBUG_EVAL,\n        With(\n            LookUp(colPF_MOVE_TREE, nodeID=pNodeID) As theCurrentNode,\n\n            Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                \" fCE_100(): san: \" & theCurrentNode.inactiveColorMoveRecord.san &\n                \" pacn: \" & theCurrentNode.inactiveColorMoveRecord.pacn &\n                \" centipawn: \" & theCurrentNode.postMoveEvalRecord.centipawn\n            })\n        )\n    )\n);\n\nCollect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \" fCE_100(): exiting\"});\n",
        "InvariantPropertyName": "fCE_200",
        "IsLockable": false,
        "NameMapSourceSchema": "?"
      },
      "fCE_200_pNodeID",
      {
        "AFDDataSourceName": "",
        "AutoRuleBindingEnabled": false,
        "AutoRuleBindingString": "\nIf(gblPF_DEBUG_EVAL,\n    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n        \" comChessEngineFunctions.fME_Preschool(): entered pNodeID: \" & pNodeID\n    })\n);\n\nWith(\n    LookUp(colPF_DYNAMIC_DATA, dataName=DYNAMIC_DATA_PF_NAME) As theData,\n\n    With(\n        LookUp(colPF_MOVE_TREE, nodeID=pNodeID) As theCurrentNode,\n\n        If(gblPF_DEBUG_EVAL,\n            Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                \" fME_Preschool(): san: \" & theCurrentNode.inactiveColorMoveRecord.san &\n                \" pacn: \" & theCurrentNode.inactiveColorMoveRecord.pacn &\n                \" move color: \" & UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN) &\n                \" captureSquareOccupier: \" & theCurrentNode.inactiveColorMoveRecord.captureSquareOccupier\n            })\n        );\n\n        Patch(colPF_MOVE_TREE, First(Filter(colPF_MOVE_TREE, nodeID=pNodeID)), {\n            postMoveEvalRecord: \n                Patch(EVAL_RECORD_PF, {\n                    heuristic01:\n                        0,\n                    heuristic02:\n                        0,\n                    heuristic05:\n                        0,\n                    heuristic11:\n                        0,\n                    heuristic12:\n                        0,\n                    heuristic13:\n                        0,\n                    heuristic14:    \n                        0,\n                    heuristic16:\n                        0,\n                    heuristic17:\n                        0,\n                    heuristic18:\n                        0,\n                    // a pinch of randomness\n                    heuristic19:\n                        RandBetween(-25,25)  // centipawns \n                })\n        });\n\n        UpdateIf(colPF_MOVE_TREE, nodeID=pNodeID, {\n            postMoveEvalRecord: \n                Patch(LookUp(colPF_MOVE_TREE, nodeID=pNodeID).postMoveEvalRecord, {\n                    centipawn:\n                        With(\n                            LookUp(colPF_MOVE_TREE, nodeID=pNodeID) As theCurrentNodeUpdated,\n                            \n                            If(gblPF_DEBUG_EVAL,\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic01 (basic positioning) SUM BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic01\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic02 ME end game: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic02\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic05 (Hanging Piece Tactic) SUM BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic05\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic11 generic tactics BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic11\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic12 fork tactic BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic12\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic13 move to/from protection BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic13\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic14 castling BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic14\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic16 BNP moves in opening sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic16\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic17 passed PAWN BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic17\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic18 Post Square Table (PST) BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic18\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic19 the God of Randomness BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic19\n                                })\n                            );\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic01 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic02 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic03 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic04 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic05 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic06 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic07 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic08 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic09 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic10 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic11 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic12 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic13 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic14 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic15 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic16 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic17 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic18 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic19\n                        )\n                })\n        })\n    );\n\n    If(gblPF_DEBUG_EVAL,\n        With(\n            LookUp(colPF_MOVE_TREE, nodeID=pNodeID) As theCurrentNode,\n\n            Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                \" fME_Preschool(): san: \" & theCurrentNode.inactiveColorMoveRecord.san &\n                \" pacn: \" & theCurrentNode.inactiveColorMoveRecord.pacn &\n                \" centipawn: \" & theCurrentNode.postMoveEvalRecord.centipawn\n            })\n        )\n    )\n);\n\nCollect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \" fME_Preschool(): exiting\"});\n",
        "InvariantPropertyName": "fCE_300",
        "IsLockable": false,
        "NameMapSourceSchema": "?"
      },
      "fCE_300_pNodeID",
      "fCE_400_pNodeID",
      {
        "AFDDataSourceName": "",
        "AutoRuleBindingEnabled": false,
        "AutoRuleBindingString": "\nIf(gblPF_DEBUG_EVAL,\n    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n        \" comChessEngineFunctions.fME_Kindergarten(): entered pNodeID: \" & pNodeID\n    })\n);\n\nWith(\n    LookUp(colPF_DYNAMIC_DATA, dataName=DYNAMIC_DATA_PF_NAME) As theData,\n\n    With(\n        LookUp(colPF_MOVE_TREE, nodeID=pNodeID) As theCurrentNode,\n\n        If(gblPF_DEBUG_EVAL,\n            Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                \" fME_Kindergarten(): san: \" & theCurrentNode.inactiveColorMoveRecord.san &\n                \" pacn: \" & theCurrentNode.inactiveColorMoveRecord.pacn &\n                \" move color: \" & UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN) &\n                \" captureSquareOccupier: \" & theCurrentNode.inactiveColorMoveRecord.captureSquareOccupier\n            })\n        );\n\n        Patch(colPF_MOVE_TREE, First(Filter(colPF_MOVE_TREE, nodeID=pNodeID)), {\n            postMoveEvalRecord: \n                Patch(EVAL_RECORD_PF, {\n                    heuristic01:\n                        0,\n                    heuristic02:\n                        0,\n                    heuristic05:\n                        0,\n                    heuristic11:\n                        0,\n                    heuristic12:\n                        0,\n                    heuristic13:\n                        0,\n                    heuristic14:    \n                        0,\n                    heuristic16:\n                        0,\n                    heuristic17:\n                        0,\n                    heuristic18:\n                        0,\n                    // a pinch of randomness\n                    heuristic19:\n                        If(UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN)=WHITE,\n                            // THEN\n                            Switch(comChessEngineFunctions.fME_getGamePhase(theCurrentNode.preMoveFEN),\n                                GAME_PHASE_OPENING,\n                                    If(theCurrentNode.inactiveColorMoveRecord.sourceSquareOccupier in \"NP\", RandBetween(0,25), RandBetween(-25,0)),\n                                GAME_PHASE_MIDDLE,\n                                    If(theCurrentNode.inactiveColorMoveRecord.sourceSquareOccupier in \"QBNP\", RandBetween(0,25), RandBetween(-25,0)),\n                                RandBetween(-25,25)\n                            ),\n\n                            // ELSE\n                            Switch(comChessEngineFunctions.fME_getGamePhase(theCurrentNode.preMoveFEN),\n                                GAME_PHASE_OPENING,\n                                    If(theCurrentNode.inactiveColorMoveRecord.sourceSquareOccupier in \"NP\", RandBetween(-25,0), RandBetween(0,25)),\n                                GAME_PHASE_MIDDLE,\n                                    If(theCurrentNode.inactiveColorMoveRecord.sourceSquareOccupier in \"QBNP\", RandBetween(-25,0), RandBetween(0,25)),\n                                RandBetween(-25,25)\n                            )\n                        )\n                })\n        });\n\n        UpdateIf(colPF_MOVE_TREE, nodeID=pNodeID, {\n            postMoveEvalRecord: \n                Patch(LookUp(colPF_MOVE_TREE, nodeID=pNodeID).postMoveEvalRecord, {\n                    centipawn:\n                        With(\n                            LookUp(colPF_MOVE_TREE, nodeID=pNodeID) As theCurrentNodeUpdated,\n                            \n                            If(gblPF_DEBUG_EVAL,\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic01 (basic positioning) SUM BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic01\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic02 ME end game: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic02\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic05 (Hanging Piece Tactic) SUM BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic05\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic11 generic tactics BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic11\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic12 fork tactic BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic12\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic13 move to/from protection BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic13\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic14 castling BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic14\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic16 BNP moves in opening sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic16\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic17 passed PAWN BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic17\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic18 Post Square Table (PST) BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic18\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic19 the God of Randomness BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic19\n                                })\n                            );\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic01 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic02 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic03 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic04 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic05 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic06 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic07 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic08 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic09 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic10 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic11 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic12 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic13 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic14 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic15 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic16 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic17 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic18 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic19\n                        )\n                })\n        })\n    );\n\n    If(gblPF_DEBUG_EVAL,\n        With(\n            LookUp(colPF_MOVE_TREE, nodeID=pNodeID) As theCurrentNode,\n\n            Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                \" fME_Kindergarten(): san: \" & theCurrentNode.inactiveColorMoveRecord.san &\n                \" pacn: \" & theCurrentNode.inactiveColorMoveRecord.pacn &\n                \" centipawn: \" & theCurrentNode.postMoveEvalRecord.centipawn\n            })\n        )\n    )\n);\n\nCollect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \" fME_Kindergarten(): exiting\"});\n",
        "InvariantPropertyName": "fCE_400",
        "IsLockable": false,
        "NameMapSourceSchema": "?"
      },
      {
        "AFDDataSourceName": "",
        "AutoRuleBindingEnabled": false,
        "AutoRuleBindingString": "\"Text\"",
        "InvariantPropertyName": "fME_getGamePhase_pFEN",
        "IsLockable": false,
        "NameMapSourceSchema": "?"
      },
      {
        "AFDDataSourceName": "",
        "AutoRuleBindingEnabled": false,
        "AutoRuleBindingString": "100",
        "InvariantPropertyName": "fME_getGamePhase",
        "IsLockable": false,
        "NameMapSourceSchema": "?"
      },
      "fME_END_GAME_pVersion",
      {
        "AFDDataSourceName": "",
        "AutoRuleBindingEnabled": false,
        "AutoRuleBindingString": "100",
        "InvariantPropertyName": "fME_END_GAME_pNodeID",
        "IsLockable": false,
        "NameMapSourceSchema": "?"
      },
      {
        "AFDDataSourceName": "",
        "AutoRuleBindingEnabled": false,
        "AutoRuleBindingString": "100",
        "InvariantPropertyName": "fME_END_GAME",
        "IsLockable": false,
        "NameMapSourceSchema": "?"
      },
      "fCE_500_pNodeID",
      {
        "AFDDataSourceName": "",
        "AutoRuleBindingEnabled": false,
        "AutoRuleBindingString": "",
        "InvariantPropertyName": "fCE_500",
        "IsLockable": false,
        "NameMapSourceSchema": "?"
      },
      "fCE_600_pNodeID",
      {
        "AFDDataSourceName": "",
        "AutoRuleBindingEnabled": false,
        "AutoRuleBindingString": "",
        "InvariantPropertyName": "fCE_600",
        "IsLockable": false,
        "NameMapSourceSchema": "?"
      },
      {
        "AFDDataSourceName": "",
        "AutoRuleBindingEnabled": false,
        "AutoRuleBindingString": "",
        "InvariantPropertyName": "fCE_600_preEvaluate",
        "IsLockable": false,
        "NameMapSourceSchema": "?"
      },
      {
        "AFDDataSourceName": "",
        "AutoRuleBindingEnabled": false,
        "AutoRuleBindingString": "",
        "InvariantPropertyName": "fCE_600_postEvaluate",
        "IsLockable": false,
        "NameMapSourceSchema": "?"
      }
    ],
    "LastModifiedTimestamp": "638620228812395028",
    "Name": "comChessEngineFunctions",
    "Rules": [
      {
        "Category": "Data",
        "InvariantScript": "EMPTY_NODE_ID",
        "Property": "fME_EvaluateMove_pNodeID",
        "RuleProviderType": "System"
      },
      {
        "Category": "Data",
        "InvariantScript": "EMPTY_NODE_ID",
        "Property": "fCE_200_pNodeID",
        "RuleProviderType": "System"
      },
      {
        "Category": "Data",
        "InvariantScript": "\"\"",
        "Property": "fME_getGamePhase_pFEN",
        "RuleProviderType": "System"
      },
      {
        "Category": "Data",
        "InvariantScript": "EMPTY_NODE_ID",
        "Property": "fCE_100_pNodeID",
        "RuleProviderType": "System"
      },
      {
        "Category": "Data",
        "InvariantScript": "EMPTY_NODE_ID",
        "Property": "fCE_300_pNodeID",
        "RuleProviderType": "System"
      },
      {
        "Category": "Data",
        "InvariantScript": "EMPTY_NODE_ID",
        "Property": "fCE_400_pNodeID",
        "RuleProviderType": "System"
      },
      {
        "Category": "Data",
        "InvariantScript": "100",
        "Property": "fME_END_GAME_pVersion",
        "RuleProviderType": "System"
      },
      {
        "Category": "Data",
        "InvariantScript": "EMPTY_NODE_ID",
        "Property": "fME_END_GAME_pNodeID",
        "RuleProviderType": "System"
      },
      {
        "Category": "Data",
        "InvariantScript": "100",
        "Property": "fCE_500_pNodeID",
        "RuleProviderType": "System"
      },
      {
        "Category": "Data",
        "InvariantScript": "100",
        "Property": "fCE_600_pNodeID",
        "RuleProviderType": "System"
      },
      {
        "Category": "Design",
        "InvariantScript": "1",
        "Property": "ZIndex",
        "RuleProviderType": "Unknown"
      },
      {
        "Category": "Design",
        "InvariantScript": "0",
        "Property": "Y",
        "RuleProviderType": "Unknown"
      },
      {
        "Category": "Design",
        "InvariantScript": "0",
        "Property": "X",
        "RuleProviderType": "Unknown"
      },
      {
        "Category": "Design",
        "InvariantScript": "640",
        "Property": "Width",
        "RuleProviderType": "Unknown"
      },
      {
        "Category": "Design",
        "InvariantScript": "640",
        "Property": "Height",
        "RuleProviderType": "Unknown"
      },
      {
        "Category": "Design",
        "InvariantScript": "RGBA(0, 0, 0, 0)",
        "Property": "Fill",
        "RuleProviderType": "System"
      },
      {
        "Category": "Behavior",
        "InvariantScript": "\nIf(gblPF_DEBUG_EVAL,\n    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n        \" comChessEngineFunctions.fCE_100(): entered pNodeID: \" & pNodeID\n    })\n);\n\nWith(\n    LookUp(colPF_DYNAMIC_DATA, dataName=DYNAMIC_DATA_PF_NAME) As theData,\n\n    With(\n        LookUp(colPF_MOVE_TREE, nodeID=pNodeID) As theCurrentNode,\n\n        If(gblPF_DEBUG_EVAL,\n            Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                \" fCE_100(): san: \" & theCurrentNode.inactiveColorMoveRecord.san &\n                \" pacn: \" & theCurrentNode.inactiveColorMoveRecord.pacn &\n                \" move color: \" & UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN) &\n                \" captureSquareOccupier: \" & theCurrentNode.inactiveColorMoveRecord.captureSquareOccupier\n            })\n        );\n\n        Patch(colPF_MOVE_TREE, First(Filter(colPF_MOVE_TREE, nodeID=pNodeID)), {\n            postMoveEvalRecord: \n                Patch(EVAL_RECORD_PF, {\n                    // a pinch of randomness\n                    heuristic19:\n                        RandBetween(-25,25)  // centipawns \n                })\n        });\n\n        UpdateIf(colPF_MOVE_TREE, nodeID=pNodeID, {\n            postMoveEvalRecord: \n                Patch(LookUp(colPF_MOVE_TREE, nodeID=pNodeID).postMoveEvalRecord, {\n                    centipawn:\n                        With(\n                            LookUp(colPF_MOVE_TREE, nodeID=pNodeID) As theCurrentNodeUpdated,\n                            \n                            If(gblPF_DEBUG_EVAL,\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic19 the God of Randomness BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic19\n                                })\n                            );\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic01 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic02 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic03 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic04 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic05 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic06 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic07 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic08 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic09 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic10 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic11 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic12 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic13 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic14 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic15 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic16 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic17 +\n                            // theCurrentNodeUpdated.postMoveEvalRecord.heuristic18 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic19\n                        )\n                })\n        })\n    );\n\n    If(gblPF_DEBUG_EVAL,\n        With(\n            LookUp(colPF_MOVE_TREE, nodeID=pNodeID) As theCurrentNode,\n\n            Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                \" fCE_100(): san: \" & theCurrentNode.inactiveColorMoveRecord.san &\n                \" pacn: \" & theCurrentNode.inactiveColorMoveRecord.pacn &\n                \" centipawn: \" & theCurrentNode.postMoveEvalRecord.centipawn\n            })\n        )\n    )\n);\n\nIf(gblPF_DEBUG_EVAL,\n    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \" fCE_100(): exiting\"})\n)\n",
        "Property": "fCE_100",
        "RuleProviderType": "System"
      },
      {
        "Category": "Behavior",
        "InvariantScript": "\nIf(gblPF_DEBUG_EVAL,\n    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n        \" comChessEngineFunctions.fCE_300(): entered pNodeID: \" & pNodeID\n    })\n);\n\nWith(\n    LookUp(colPF_DYNAMIC_DATA, dataName=DYNAMIC_DATA_PF_NAME) As theData,\n\n    With(\n        LookUp(colPF_MOVE_TREE, nodeID=pNodeID) As theCurrentNode,\n\n        If(gblPF_DEBUG_EVAL,\n            Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                \" fCE_300(): san: \" & theCurrentNode.inactiveColorMoveRecord.san &\n                \" pacn: \" & theCurrentNode.inactiveColorMoveRecord.pacn &\n                \" move color: \" & UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN) &\n                \" captureSquareOccupier: \" & theCurrentNode.inactiveColorMoveRecord.captureSquareOccupier\n            })\n        );\n\n        Patch(colPF_MOVE_TREE, First(Filter(colPF_MOVE_TREE, nodeID=pNodeID)), {\n            postMoveEvalRecord: \n                Patch(EVAL_RECORD_PF, {\n                    heuristic11:\n                        // the dumb bully part\n                        Sum(\n                            ForAll(\n                                Split(UDF_FEN_TO_PIECE_PLACEMENT(theCurrentNode.postMoveFEN), \"\") As thePiece,\n\n                                UDF_getPieceCentipawnMaterialValue(thePiece.Value, \"QRBNPqrbnp\")\n                            ),\n                            Value\n                        ) -\n                        Sum(\n                            ForAll(\n                                Split(UDF_FEN_TO_PIECE_PLACEMENT(theCurrentNode.preMoveFEN), \"\") As thePiece,\n\n                                UDF_getPieceCentipawnMaterialValue(thePiece.Value, \"QRBNPqrbnp\")\n                            ),\n                            Value\n                        ),\n                    heuristic17:\n                        If(UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN)=WHITE,\n                            // THEN\n                            If(gblPF_DEBUG_EVAL,\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                    \" fCE_300(): DEBUG heuristic17 preMove active color WHITE \" & \n                                    \" # of BLACK pieces: \" & UDF_countPiecesOnBoard(theCurrentNode.preMoveBoard, \"kqrbnp\")\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                    \" preMoveFEN: \" & theCurrentNode.preMoveFEN\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                    \" preMoveBoard: \" & theCurrentNode.preMoveBoard\n                                })\n                            );\n                            If(UDF_countPiecesOnBoard(theCurrentNode.preMoveBoard, \"kqrbnp\")>1,\n                                // THEN\n                                0,\n\n                                // ELSE - the opponent is a lone king\n                                Sum(\n                                    With(\n                                        {\n                                            sqNum:      UDF_SearchBoardForPiece(theCurrentNode.preMoveBoard, UDF_getICPieceABBR(theCurrentNode.preMoveFEN, \"k\"))\n                                        } As theirKing,\n\n                                        With(\n                                            {\n                                                adjSquaresSet: UDF_createSetOfSqNames(UDF_sqNumToAdjacentSqNames(theirKing.sqNum) & \" \" & UDF_sqNumToSqName(theirKing.sqNum)),\n                                                noKingPreMoveBoard: UDF_setBitAtSqNum(\n                                                                        theCurrentNode.preMoveBoard,\n                                                                        EMPTY_FILLER_ABBR,\n                                                                        UDF_SearchBoardForPiece(theCurrentNode.preMoveBoard, \"k\")\n                                                                    ),\n                                                noKingPostMoveBoard:    UDF_setBitAtSqNum(\n                                                                            theCurrentNode.postMoveBoard,\n                                                                            EMPTY_FILLER_ABBR,\n                                                                            UDF_SearchBoardForPiece(theCurrentNode.postMoveBoard, \"k\")\n                                                                        ),\n                                                // remove the moving piece so that we can determine if we can move to an adjacent protected square\n                                                noKingNoPiecePreMoveBoard:  UDF_setBitAtSqNum(\n                                                                                UDF_setBitAtSqNum(\n                                                                                    theCurrentNode.preMoveBoard,\n                                                                                    EMPTY_FILLER_ABBR,\n                                                                                    theCurrentNode.inactiveColorMoveRecord.sourceSquareNum\n                                                                                ),\n                                                                                EMPTY_FILLER_ABBR,\n                                                                                UDF_SearchBoardForPiece(theCurrentNode.preMoveBoard,\"k\")\n                                                                            ),\n                                                noKingNoPiecePostMoveBoard: UDF_setBitAtSqNum(\n                                                                                UDF_setBitAtSqNum(\n                                                                                    theCurrentNode.postMoveBoard,\n                                                                                    EMPTY_FILLER_ABBR,\n                                                                                    theCurrentNode.inactiveColorMoveRecord.targetSquareNum\n                                                                                ),\n                                                                                EMPTY_FILLER_ABBR,\n                                                                                UDF_SearchBoardForPiece(theCurrentNode.postMoveBoard,\"k\")\n                                                                            )\n                                            } As adjToTheirKing,\n\n                                            If(gblPF_DEBUG_EVAL,\n                                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                    \" fCE_300(): heuristic17 opponent kingSq: \" & UDF_sqNumToSqName(theirKing.sqNum) & \"(\" & theirKing.sqNum & \")\" &\n                                                    \" Black King adj set: \" & adjToTheirKing.adjSquaresSet\n                                                })\n                                            );\n                                            If((!(theCurrentNode.inactiveColorMoveRecord.targetSquareName exactin adjToTheirKing.adjSquaresSet)) ||\n                                                UDF_isSqNumAttacked(\n                                                    adjToTheirKing.noKingNoPiecePostMoveBoard,\n                                                    theCurrentNode.inactiveColorMoveRecord.targetSquareNum,\n                                                    WHITE\n                                                ),\n                                                // THEN\n                                                If(gblPF_DEBUG_EVAL,\n                                                    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                        \" fCE_300(): heuristic17 looking to encourage move if it qualifies targetSqName: \" & theCurrentNode.inactiveColorMoveRecord.targetSquareNum\n                                                    })\n                                                );\n                                                Sum(\n                                                    ForAll(\n                                                        Split(adjToTheirKing.adjSquaresSet, \" \") As adjSquareName,\n\n                                                        With(\n                                                            {\n                                                                preMoveIsAttacked:  UDF_isSqNumAttacked(adjToTheirKing.noKingPreMoveBoard, UDF_sqNameToSqNum(adjSquareName.Value), WHITE),\n                                                                postMoveIsAttacked: UDF_isSqNumAttacked(adjToTheirKing.noKingPostMoveBoard, UDF_sqNameToSqNum(adjSquareName.Value), WHITE)\n                                                            } As attackBooleans,\n\n                                                            If(gblPF_DEBUG_EVAL,\n                                                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                                    \" Black King adjSquareName: \" & adjSquareName.Value & \"(\" & UDF_sqNameToSqNum(adjSquareName.Value) & \")\" &\n                                                                        \" preMove isAttacked?: \" & attackBooleans.preMoveIsAttacked &\n                                                                        \" postMove isAttacked?: \" & attackBooleans.postMoveIsAttacked\n                                                                })\n                                                            );\n                                                            Switch(true,\n                                                                attackBooleans.preMoveIsAttacked=false && attackBooleans.postMoveIsAttacked=true, 1,\n                                                                attackBooleans.preMoveIsAttacked=true && attackBooleans.postMoveIsAttacked=false, -1,\n                                                                \n                                                                // default\n                                                                0\n                                                            )\n                                                        )\n                                                    ), Value\n                                                ) * 21,\n\n                                                // ELSE\n                                                If(theCurrentNode.inactiveColorMoveRecord.targetSquareName exactin adjToTheirKing.adjSquaresSet,\n                                                    // THEN\n                                                    If(gblPF_DEBUG_EVAL,\n                                                        Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                            \" fCE_300(): heuristic17 discouraging move to naked adj square targetSqName: \" &\n                                                                theCurrentNode.inactiveColorMoveRecord.targetSquareNum\n                                                        })\n                                                    );\n                                                    -21, // do not want to move there - will be captured,\n\n                                                    // ELSE\n                                                    If(gblPF_DEBUG_EVAL,\n                                                        Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                            \" fCE_300(): heuristic17 neutral targetSqName: \" & theCurrentNode.inactiveColorMoveRecord.targetSquareNum\n                                                        })\n                                                    );\n                                                    0\n                                                )\n                                            )\n\n                                        )\n                                    ),\n                                    // - push the pawns forward (until we have enough Qs) - is this a pawn move ?\n                                    If(theCurrentNode.inactiveColorMoveRecord.sourceSquareOccupier in \"P\" && UDF_countPiecesOnBoard(theCurrentNode.preMoveBoard, \"Q\")<3,\n                                        // THEN - bump up the promotion to a Q\n                                        If(IsBlank(theCurrentNode.inactiveColorMoveRecord.promoteTo) || theCurrentNode.inactiveColorMoveRecord.promoteTo in \"Q\",\n                                            UDF_getRankFromSqName(theCurrentNode.inactiveColorMoveRecord.targetSquareName) * RandBetween(8,18),\n                                            0\n                                        ),\n                                        // ELSE\n                                        0\n                                    )\n                                )\n                            ),\n\n                            // ELSE\n                            If(gblPF_DEBUG_EVAL,\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                    \" fCE_300(): DEBUG heuristic17 preMove active color BLACK \" & \n                                    \" # of WHITE pieces: \" & UDF_countPiecesOnBoard(theCurrentNode.preMoveBoard, \"KQRBNP\")\n                                })\n                            );\n                            If(UDF_countPiecesOnBoard(theCurrentNode.preMoveBoard, \"KQRBNP\")>1,\n                                // THEN\n                                0,\n\n                                // ELSE - the opponent is a lone king \n                                Sum(\n                                    With(\n                                        {\n                                            sqNum:      UDF_SearchBoardForPiece(theCurrentNode.preMoveBoard, UDF_getICPieceABBR(theCurrentNode.preMoveFEN, \"K\"))\n                                        } As theirKing,\n\n                                        With(\n                                            {\n                                                adjSquaresSet: UDF_createSetOfSqNames(UDF_sqNumToAdjacentSqNames(theirKing.sqNum) & \" \" & UDF_sqNumToSqName(theirKing.sqNum)),\n                                                noKingPreMoveBoard: UDF_setBitAtSqNum(\n                                                                        theCurrentNode.preMoveBoard,\n                                                                        EMPTY_FILLER_ABBR,\n                                                                        UDF_SearchBoardForPiece(theCurrentNode.preMoveBoard, \"K\")\n                                                                    ),\n                                                noKingPostMoveBoard:    UDF_setBitAtSqNum(\n                                                                            theCurrentNode.postMoveBoard,\n                                                                            EMPTY_FILLER_ABBR,\n                                                                            UDF_SearchBoardForPiece(theCurrentNode.postMoveBoard, \"K\")\n                                                                        ),\n                                                // remove the moving piece so that we can determine if we can move to an adjacent protected square\n                                                noKingNoPiecePreMoveBoard:  UDF_setBitAtSqNum(\n                                                                                UDF_setBitAtSqNum(\n                                                                                    theCurrentNode.preMoveBoard,\n                                                                                    EMPTY_FILLER_ABBR,\n                                                                                    theCurrentNode.inactiveColorMoveRecord.sourceSquareNum\n                                                                                ),\n                                                                                EMPTY_FILLER_ABBR,\n                                                                                UDF_SearchBoardForPiece(theCurrentNode.preMoveBoard,\"K\")\n                                                                            ),\n                                                noKingNoPiecePostMoveBoard: UDF_setBitAtSqNum(\n                                                                                UDF_setBitAtSqNum(\n                                                                                    theCurrentNode.postMoveBoard,\n                                                                                    EMPTY_FILLER_ABBR,\n                                                                                    theCurrentNode.inactiveColorMoveRecord.targetSquareNum\n                                                                                ),\n                                                                                EMPTY_FILLER_ABBR,\n                                                                                UDF_SearchBoardForPiece(theCurrentNode.postMoveBoard,\"K\")\n                                                                            )\n                                            } As adjToTheirKing,\n\n                                            If(gblPF_DEBUG_EVAL,\n                                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                    \" fCE_300(): heuristic17 opponent kingSq: \" & UDF_sqNumToSqName(theirKing.sqNum) & \"(\" & theirKing.sqNum & \")\" &\n                                                    \" White King adj set: \" & adjToTheirKing.adjSquaresSet\n                                                })\n                                            );\n                                            If((!(theCurrentNode.inactiveColorMoveRecord.targetSquareName exactin adjToTheirKing.adjSquaresSet)) ||\n                                                UDF_isSqNumAttacked(\n                                                    adjToTheirKing.noKingNoPiecePostMoveBoard,\n                                                    theCurrentNode.inactiveColorMoveRecord.targetSquareNum,\n                                                    BLACK\n                                                ),\n                                                // THEN\n                                                If(gblPF_DEBUG_EVAL,\n                                                    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                        \" fCE_300(): heuristic17 looking to encourage move if it qualifies targetSqName: \" & theCurrentNode.inactiveColorMoveRecord.targetSquareNum\n                                                    })\n                                                );\n                                                Sum(\n                                                    ForAll(\n                                                        Split(adjToTheirKing.adjSquaresSet, \" \") As adjSquareName,\n\n                                                        With(\n                                                            {\n                                                                preMoveIsAttacked:  UDF_isSqNumAttacked(adjToTheirKing.noKingPreMoveBoard, UDF_sqNameToSqNum(adjSquareName.Value), BLACK),\n                                                                postMoveIsAttacked: UDF_isSqNumAttacked(adjToTheirKing.noKingPostMoveBoard, UDF_sqNameToSqNum(adjSquareName.Value), BLACK)\n                                                            } As attackBooleans,\n\n                                                            If(gblPF_DEBUG_EVAL,\n                                                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                                    \" White King adjSquareName: \" & adjSquareName.Value & \"(\" & UDF_sqNameToSqNum(adjSquareName.Value) & \")\" &\n                                                                        \" preMove isAttacked?: \" & attackBooleans.preMoveIsAttacked &\n                                                                        \" postMove isAttacked?: \" & attackBooleans.postMoveIsAttacked\n                                                                })\n                                                            );\n                                                            Switch(true,\n                                                                attackBooleans.preMoveIsAttacked=false && attackBooleans.postMoveIsAttacked=true, 1,\n                                                                attackBooleans.preMoveIsAttacked=true && attackBooleans.postMoveIsAttacked=false, -1,\n                                                                \n                                                                // default\n                                                                0\n                                                            )\n                                                        )\n                                                    ), Value\n                                                ) * -21,\n\n                                                // ELSE\n                                                If(theCurrentNode.inactiveColorMoveRecord.targetSquareName exactin adjToTheirKing.adjSquaresSet,\n                                                    // THEN\n                                                    If(gblPF_DEBUG_EVAL,\n                                                        Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                            \" fCE_300(): heuristic17 discouraging move to naked adj square targetSqName: \" &\n                                                                theCurrentNode.inactiveColorMoveRecord.targetSquareNum\n                                                        })\n                                                    );\n                                                    21, // do not want to move there - will be captured,\n\n                                                    // ELSE\n                                                    If(gblPF_DEBUG_EVAL,\n                                                        Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                            \" fCE_300(): heuristic17 neutral targetSqName: \" &\n                                                                theCurrentNode.inactiveColorMoveRecord.targetSquareNum\n                                                        })\n                                                    );\n                                                    0\n                                                )\n                                            )\n                                        )\n                                    ),\n                                    // push the pawns forward (until we have enough Qs) - is this a pawn move ?\n                                    If(theCurrentNode.inactiveColorMoveRecord.sourceSquareOccupier in \"P\" && UDF_countPiecesOnBoard(theCurrentNode.preMoveBoard, \"q\")<3,\n                                        // THEN - bump up the promotion to a Q\n                                        If(IsBlank(theCurrentNode.inactiveColorMoveRecord.promoteTo) || theCurrentNode.inactiveColorMoveRecord.promoteTo in \"Q\",\n                                            (8 - UDF_getRankFromSqName(theCurrentNode.inactiveColorMoveRecord.targetSquareName)) * RandBetween(-18,-8),\n                                            0\n                                        ),\n                                        // ELSE\n                                        0\n                                    )\n                                )\n                            )\n                        ),\n                    heuristic18:\n                        // add some order\n                        If(UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN)=WHITE,\n                            // THEN\n                            Switch(comChessEngineFunctions.fME_getGamePhase(theCurrentNode.preMoveFEN),\n                                GAME_PHASE_OPENING,\n                                    If(theCurrentNode.inactiveColorMoveRecord.sourceSquareOccupier in \"NP\", RandBetween(-5,15), 0),\n                                GAME_PHASE_MIDDLE,\n                                    If(theCurrentNode.inactiveColorMoveRecord.sourceSquareOccupier in \"QBNP\", RandBetween(-5,15), 0),\n                                If(theCurrentNode.inactiveColorMoveRecord.sourceSquareOccupier in \"QR\", RandBetween(-5,15), 0)\n                            ),\n\n                            // ELSE\n                            Switch(comChessEngineFunctions.fME_getGamePhase(theCurrentNode.preMoveFEN),\n                                GAME_PHASE_OPENING,\n                                    If(theCurrentNode.inactiveColorMoveRecord.sourceSquareOccupier in \"NP\", RandBetween(-15,5), 0),\n                                GAME_PHASE_MIDDLE,\n                                    If(theCurrentNode.inactiveColorMoveRecord.sourceSquareOccupier in \"QBNP\", RandBetween(-15,5), 0),\n                                If(theCurrentNode.inactiveColorMoveRecord.sourceSquareOccupier in \"QR\", RandBetween(-15,5), 0)\n                            )\n                        ),\n                    heuristic19:\n                        RandBetween(-8,8)\n\n                })\n        });\n\n        UpdateIf(colPF_MOVE_TREE, nodeID=pNodeID, {\n            postMoveEvalRecord: \n                Patch(LookUp(colPF_MOVE_TREE, nodeID=pNodeID).postMoveEvalRecord, {\n                    centipawn:\n                        With(\n                            LookUp(colPF_MOVE_TREE, nodeID=pNodeID) As theCurrentNodeUpdated,\n                            \n                            If(gblPF_DEBUG_EVAL,\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic11: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic11\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic17: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic17\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic18: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic18\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic19 the God of Randomness BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic19\n                                })\n                            );\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic11 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic17 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic18 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic19\n                        )\n                })\n        })\n    );\n\n    If(gblPF_DEBUG_EVAL,\n        With(\n            LookUp(colPF_MOVE_TREE, nodeID=pNodeID) As theCurrentNode,\n\n            Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                \" fCE_300(): san: \" & theCurrentNode.inactiveColorMoveRecord.san &\n                \" pacn: \" & theCurrentNode.inactiveColorMoveRecord.pacn &\n                \" centipawn: \" & theCurrentNode.postMoveEvalRecord.centipawn\n            })\n        )\n    )\n);\n\nIf(gblPF_DEBUG_EVAL,\n    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \" fCE_300(): exiting\"})\n)\n\n",
        "Property": "fCE_300",
        "RuleProviderType": "System"
      },
      {
        "Category": "Behavior",
        "InvariantScript": "\nIf(gblPF_DEBUG_EVAL,\n    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n        \" comChessEngineFunctions.fCE_400(): entered pNodeID: \" & pNodeID\n    })\n);\n\nWith(\n    LookUp(colPF_DYNAMIC_DATA, dataName=DYNAMIC_DATA_PF_NAME) As theData,\n\n    With(\n        LookUp(colPF_MOVE_TREE, nodeID=pNodeID) As theCurrentNode,\n\n        If(gblPF_DEBUG_EVAL,\n            Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                \" fCE_400(): san: \" & theCurrentNode.inactiveColorMoveRecord.san &\n                \" pacn: \" & theCurrentNode.inactiveColorMoveRecord.pacn &\n                \" move color: \" & UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN) &\n                \" captureSquareOccupier: \" & theCurrentNode.inactiveColorMoveRecord.captureSquareOccupier\n            })\n        );\n\n        Patch(colPF_MOVE_TREE, First(Filter(colPF_MOVE_TREE, nodeID=pNodeID)), {\n            postMoveEvalRecord: \n                Patch(EVAL_RECORD_PF, {\n                    heuristic11:\n                        With(\n                            {\n                                materialDelta:\n                                    Sum(\n                                        ForAll(\n                                            Split(UDF_FEN_TO_PIECE_PLACEMENT(theCurrentNode.postMoveFEN), \"\") As thePiece,\n\n                                            UDF_getPieceCentipawnMaterialValue(thePiece.Value, \"QRBNPqrbnp\")\n                                        ),\n                                        Value\n                                    ) -\n                                    Sum(\n                                        ForAll(\n                                            Split(UDF_FEN_TO_PIECE_PLACEMENT(theCurrentNode.preMoveFEN), \"\") As thePiece,\n\n                                            UDF_getPieceCentipawnMaterialValue(thePiece.Value, \"QRBNPqrbnp\")\n                                        ),\n                                        Value\n                                    ),\n                                materialSource:\n                                    UDF_getPieceCentipawnMaterialValue(\n                                        theCurrentNode.inactiveColorMoveRecord.sourceSquareOccupier,\n                                        \"KQRBNPkqrbnp\"\n                                    ),\n                                materialCapture: \n                                    UDF_getPieceCentipawnMaterialValue(\n                                        theCurrentNode.inactiveColorMoveRecord.captureSquareOccupier,\n                                        \"KQRBNPkqrbnp\"\n                                    ),\n                                targetSqAttacked:\n                                    UDF_isSqNumAttacked(\n                                        theCurrentNode.postMoveBoard,\n                                        theCurrentNode.inactiveColorMoveRecord.targetSquareNum,\n                                        UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.postMoveFEN)\n                                    )\n                            } As localVars,\n\n                            If(!localVars.targetSqAttacked || (Abs(localVars.materialSource)<Abs(localVars.materialCapture)),\n                                // THEN\n                                localVars.materialDelta,\n\n                                // ELSE - discourage the move\n                                If(UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN)=WHITE,-25,25)\n                            )\n                        ),\n\n                    heuristic17:\n                        If(UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN)=WHITE,\n                            // THEN\n                            If(gblPF_DEBUG_EVAL,\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                    \" fCE_400(): DEBUG heuristic17 preMove active color WHITE \" & \n                                    \" # of BLACK pieces: \" & UDF_countPiecesOnBoard(theCurrentNode.preMoveBoard, \"kqrbnp\")\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                    \" preMoveFEN: \" & theCurrentNode.preMoveFEN\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                    \" preMoveBoard: \" & theCurrentNode.preMoveBoard\n                                })\n                            );\n                            If(UDF_countPiecesOnBoard(theCurrentNode.preMoveBoard, \"kqrbnp\")>1,\n                                // THEN\n                                0,\n\n                                // ELSE - the opponent is a lone king\n                                Sum(\n                                    With(\n                                        {\n                                            sqNum:      UDF_SearchBoardForPiece(theCurrentNode.preMoveBoard, UDF_getICPieceABBR(theCurrentNode.preMoveFEN, \"k\"))\n                                        } As theirKing,\n\n                                        With(\n                                            {\n                                                adjSquaresSet: UDF_createSetOfSqNames(UDF_sqNumToAdjacentSqNames(theirKing.sqNum) & \" \" & UDF_sqNumToSqName(theirKing.sqNum)),\n                                                noKingPreMoveBoard: UDF_setBitAtSqNum(\n                                                                        theCurrentNode.preMoveBoard,\n                                                                        EMPTY_FILLER_ABBR,\n                                                                        UDF_SearchBoardForPiece(theCurrentNode.preMoveBoard, \"k\")\n                                                                    ),\n                                                noKingPostMoveBoard:    UDF_setBitAtSqNum(\n                                                                            theCurrentNode.postMoveBoard,\n                                                                            EMPTY_FILLER_ABBR,\n                                                                            UDF_SearchBoardForPiece(theCurrentNode.postMoveBoard, \"k\")\n                                                                        ),\n                                                // remove the moving piece so that we can determine if we can move to an adjacent protected square\n                                                noKingNoPiecePreMoveBoard:  UDF_setBitAtSqNum(\n                                                                                UDF_setBitAtSqNum(\n                                                                                    theCurrentNode.preMoveBoard,\n                                                                                    EMPTY_FILLER_ABBR,\n                                                                                    theCurrentNode.inactiveColorMoveRecord.sourceSquareNum\n                                                                                ),\n                                                                                EMPTY_FILLER_ABBR,\n                                                                                UDF_SearchBoardForPiece(theCurrentNode.preMoveBoard,\"k\")\n                                                                            ),\n                                                noKingNoPiecePostMoveBoard: UDF_setBitAtSqNum(\n                                                                                UDF_setBitAtSqNum(\n                                                                                    theCurrentNode.postMoveBoard,\n                                                                                    EMPTY_FILLER_ABBR,\n                                                                                    theCurrentNode.inactiveColorMoveRecord.targetSquareNum\n                                                                                ),\n                                                                                EMPTY_FILLER_ABBR,\n                                                                                UDF_SearchBoardForPiece(theCurrentNode.postMoveBoard,\"k\")\n                                                                            )\n                                            } As adjToTheirKing,\n\n                                            If(gblPF_DEBUG_EVAL,\n                                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                    \" fCE_400(): heuristic17 opponent kingSq: \" & UDF_sqNumToSqName(theirKing.sqNum) & \"(\" & theirKing.sqNum & \")\" &\n                                                    \" Black King adj set: \" & adjToTheirKing.adjSquaresSet\n                                                })\n                                            );\n                                            If((!(theCurrentNode.inactiveColorMoveRecord.targetSquareName exactin adjToTheirKing.adjSquaresSet)) ||\n                                                UDF_isSqNumAttacked(\n                                                    adjToTheirKing.noKingNoPiecePostMoveBoard,\n                                                    theCurrentNode.inactiveColorMoveRecord.targetSquareNum,\n                                                    WHITE\n                                                ),\n                                                // THEN\n                                                If(gblPF_DEBUG_EVAL,\n                                                    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                        \" fCE_400(): heuristic17 looking to encourage move if it qualifies targetSqName: \" & theCurrentNode.inactiveColorMoveRecord.targetSquareNum\n                                                    })\n                                                );\n                                                Sum(\n                                                    ForAll(\n                                                        Split(adjToTheirKing.adjSquaresSet, \" \") As adjSquareName,\n\n                                                        With(\n                                                            {\n                                                                preMoveIsAttacked:  UDF_isSqNumAttacked(adjToTheirKing.noKingPreMoveBoard, UDF_sqNameToSqNum(adjSquareName.Value), WHITE),\n                                                                postMoveIsAttacked: UDF_isSqNumAttacked(adjToTheirKing.noKingPostMoveBoard, UDF_sqNameToSqNum(adjSquareName.Value), WHITE)\n                                                            } As attackBooleans,\n\n                                                            If(gblPF_DEBUG_EVAL,\n                                                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                                    \" Black King adjSquareName: \" & adjSquareName.Value & \"(\" & UDF_sqNameToSqNum(adjSquareName.Value) & \")\" &\n                                                                        \" preMove isAttacked?: \" & attackBooleans.preMoveIsAttacked &\n                                                                        \" postMove isAttacked?: \" & attackBooleans.postMoveIsAttacked\n                                                                })\n                                                            );\n                                                            Switch(true,\n                                                                attackBooleans.preMoveIsAttacked=false && attackBooleans.postMoveIsAttacked=true, 1,\n                                                                attackBooleans.preMoveIsAttacked=true && attackBooleans.postMoveIsAttacked=false, -1,\n                                                                \n                                                                // default\n                                                                0\n                                                            )\n                                                        )\n                                                    ), Value\n                                                ) * 21,\n\n                                                // ELSE\n                                                If(theCurrentNode.inactiveColorMoveRecord.targetSquareName exactin adjToTheirKing.adjSquaresSet,\n                                                    // THEN\n                                                    If(gblPF_DEBUG_EVAL,\n                                                        Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                            \" fCE_400(): heuristic17 discouraging move to naked adj square targetSqName: \" &\n                                                                theCurrentNode.inactiveColorMoveRecord.targetSquareNum\n                                                        })\n                                                    );\n                                                    -21, // do not want to move there - will be captured,\n\n                                                    // ELSE\n                                                    If(gblPF_DEBUG_EVAL,\n                                                        Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                            \" fCE_400(): heuristic17 neutral targetSqName: \" & theCurrentNode.inactiveColorMoveRecord.targetSquareNum\n                                                        })\n                                                    );\n                                                    0\n                                                )\n                                            )\n\n                                        )\n                                    ),\n                                    // - push the pawns forward (until we have enough Qs) - is this a pawn move ?\n                                    If(theCurrentNode.inactiveColorMoveRecord.sourceSquareOccupier in \"P\" && UDF_countPiecesOnBoard(theCurrentNode.preMoveBoard, \"Q\")<3,\n                                        // THEN - bump up the promotion to a Q\n                                        If(IsBlank(theCurrentNode.inactiveColorMoveRecord.promoteTo) || theCurrentNode.inactiveColorMoveRecord.promoteTo in \"Q\",\n                                            UDF_getRankFromSqName(theCurrentNode.inactiveColorMoveRecord.targetSquareName) * RandBetween(8,18),\n                                            0\n                                        ),\n                                        // ELSE\n                                        0\n                                    )\n                                )\n                            ),\n\n                            // ELSE\n                            If(gblPF_DEBUG_EVAL,\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                    \" fCE_400(): DEBUG heuristic17 preMove active color BLACK \" & \n                                    \" # of WHITE pieces: \" & UDF_countPiecesOnBoard(theCurrentNode.preMoveBoard, \"KQRBNP\")\n                                })\n                            );\n                            If(UDF_countPiecesOnBoard(theCurrentNode.preMoveBoard, \"KQRBNP\")>1,\n                                // THEN\n                                0,\n\n                                // ELSE - the opponent is a lone king \n                                Sum(\n                                    With(\n                                        {\n                                            sqNum:      UDF_SearchBoardForPiece(theCurrentNode.preMoveBoard, UDF_getICPieceABBR(theCurrentNode.preMoveFEN, \"K\"))\n                                        } As theirKing,\n\n                                        With(\n                                            {\n                                                adjSquaresSet: UDF_createSetOfSqNames(UDF_sqNumToAdjacentSqNames(theirKing.sqNum) & \" \" & UDF_sqNumToSqName(theirKing.sqNum)),\n                                                noKingPreMoveBoard: UDF_setBitAtSqNum(\n                                                                        theCurrentNode.preMoveBoard,\n                                                                        EMPTY_FILLER_ABBR,\n                                                                        UDF_SearchBoardForPiece(theCurrentNode.preMoveBoard, \"K\")\n                                                                    ),\n                                                noKingPostMoveBoard:    UDF_setBitAtSqNum(\n                                                                            theCurrentNode.postMoveBoard,\n                                                                            EMPTY_FILLER_ABBR,\n                                                                            UDF_SearchBoardForPiece(theCurrentNode.postMoveBoard, \"K\")\n                                                                        ),\n                                                // remove the moving piece so that we can determine if we can move to an adjacent protected square\n                                                noKingNoPiecePreMoveBoard:  UDF_setBitAtSqNum(\n                                                                                UDF_setBitAtSqNum(\n                                                                                    theCurrentNode.preMoveBoard,\n                                                                                    EMPTY_FILLER_ABBR,\n                                                                                    theCurrentNode.inactiveColorMoveRecord.sourceSquareNum\n                                                                                ),\n                                                                                EMPTY_FILLER_ABBR,\n                                                                                UDF_SearchBoardForPiece(theCurrentNode.preMoveBoard,\"K\")\n                                                                            ),\n                                                noKingNoPiecePostMoveBoard: UDF_setBitAtSqNum(\n                                                                                UDF_setBitAtSqNum(\n                                                                                    theCurrentNode.postMoveBoard,\n                                                                                    EMPTY_FILLER_ABBR,\n                                                                                    theCurrentNode.inactiveColorMoveRecord.targetSquareNum\n                                                                                ),\n                                                                                EMPTY_FILLER_ABBR,\n                                                                                UDF_SearchBoardForPiece(theCurrentNode.postMoveBoard,\"K\")\n                                                                            )\n                                            } As adjToTheirKing,\n\n                                            If(gblPF_DEBUG_EVAL,\n                                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                    \" fCE_400(): heuristic17 opponent kingSq: \" & UDF_sqNumToSqName(theirKing.sqNum) & \"(\" & theirKing.sqNum & \")\" &\n                                                    \" White King adj set: \" & adjToTheirKing.adjSquaresSet\n                                                })\n                                            );\n                                            If((!(theCurrentNode.inactiveColorMoveRecord.targetSquareName exactin adjToTheirKing.adjSquaresSet)) ||\n                                                UDF_isSqNumAttacked(\n                                                    adjToTheirKing.noKingNoPiecePostMoveBoard,\n                                                    theCurrentNode.inactiveColorMoveRecord.targetSquareNum,\n                                                    BLACK\n                                                ),\n                                                // THEN\n                                                If(gblPF_DEBUG_EVAL,\n                                                    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                        \" fCE_400(): heuristic17 looking to encourage move if it qualifies targetSqName: \" & theCurrentNode.inactiveColorMoveRecord.targetSquareNum\n                                                    })\n                                                );\n                                                Sum(\n                                                    ForAll(\n                                                        Split(adjToTheirKing.adjSquaresSet, \" \") As adjSquareName,\n\n                                                        With(\n                                                            {\n                                                                preMoveIsAttacked:  UDF_isSqNumAttacked(adjToTheirKing.noKingPreMoveBoard, UDF_sqNameToSqNum(adjSquareName.Value), BLACK),\n                                                                postMoveIsAttacked: UDF_isSqNumAttacked(adjToTheirKing.noKingPostMoveBoard, UDF_sqNameToSqNum(adjSquareName.Value), BLACK)\n                                                            } As attackBooleans,\n\n                                                            If(gblPF_DEBUG_EVAL,\n                                                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                                    \" White King adjSquareName: \" & adjSquareName.Value & \"(\" & UDF_sqNameToSqNum(adjSquareName.Value) & \")\" &\n                                                                        \" preMove isAttacked?: \" & attackBooleans.preMoveIsAttacked &\n                                                                        \" postMove isAttacked?: \" & attackBooleans.postMoveIsAttacked\n                                                                })\n                                                            );\n                                                            Switch(true,\n                                                                attackBooleans.preMoveIsAttacked=false && attackBooleans.postMoveIsAttacked=true, 1,\n                                                                attackBooleans.preMoveIsAttacked=true && attackBooleans.postMoveIsAttacked=false, -1,\n                                                                \n                                                                // default\n                                                                0\n                                                            )\n                                                        )\n                                                    ), Value\n                                                ) * -21,\n\n                                                // ELSE\n                                                If(theCurrentNode.inactiveColorMoveRecord.targetSquareName exactin adjToTheirKing.adjSquaresSet,\n                                                    // THEN\n                                                    If(gblPF_DEBUG_EVAL,\n                                                        Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                            \" fCE_400(): heuristic17 discouraging move to naked adj square targetSqName: \" &\n                                                                theCurrentNode.inactiveColorMoveRecord.targetSquareNum\n                                                        })\n                                                    );\n                                                    21, // do not want to move there - will be captured,\n\n                                                    // ELSE\n                                                    If(gblPF_DEBUG_EVAL,\n                                                        Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                            \" fCE_400(): heuristic17 neutral targetSqName: \" &\n                                                                theCurrentNode.inactiveColorMoveRecord.targetSquareNum\n                                                        })\n                                                    );\n                                                    0\n                                                )\n                                            )\n                                        )\n                                    ),\n                                    // push the pawns forward (until we have enough Qs) - is this a pawn move ?\n                                    If(theCurrentNode.inactiveColorMoveRecord.sourceSquareOccupier in \"P\" && UDF_countPiecesOnBoard(theCurrentNode.preMoveBoard, \"q\")<3,\n                                        // THEN - bump up the promotion to a Q\n                                        If(IsBlank(theCurrentNode.inactiveColorMoveRecord.promoteTo) || theCurrentNode.inactiveColorMoveRecord.promoteTo in \"Q\",\n                                            (8 - UDF_getRankFromSqName(theCurrentNode.inactiveColorMoveRecord.targetSquareName)) * RandBetween(-18,-8),\n                                            0\n                                        ),\n                                        // ELSE\n                                        0\n                                    )\n                                )\n                            )\n                        ),\n                    heuristic18:\n                        // add some order\n                        If(UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN)=WHITE,\n                            // THEN\n                            Switch(comChessEngineFunctions.fME_getGamePhase(theCurrentNode.preMoveFEN),\n                                GAME_PHASE_OPENING,\n                                    If(theCurrentNode.inactiveColorMoveRecord.sourceSquareOccupier in \"NP\", RandBetween(-5,15), 0),\n                                GAME_PHASE_MIDDLE,\n                                    If(theCurrentNode.inactiveColorMoveRecord.sourceSquareOccupier in \"QBNP\", RandBetween(-5,15), 0),\n                                If(theCurrentNode.inactiveColorMoveRecord.sourceSquareOccupier in \"QR\", RandBetween(-5,15), 0)\n                            ),\n\n                            // ELSE\n                            Switch(comChessEngineFunctions.fME_getGamePhase(theCurrentNode.preMoveFEN),\n                                GAME_PHASE_OPENING,\n                                    If(theCurrentNode.inactiveColorMoveRecord.sourceSquareOccupier in \"NP\", RandBetween(-15,5), 0),\n                                GAME_PHASE_MIDDLE,\n                                    If(theCurrentNode.inactiveColorMoveRecord.sourceSquareOccupier in \"QBNP\", RandBetween(-15,5), 0),\n                                If(theCurrentNode.inactiveColorMoveRecord.sourceSquareOccupier in \"QR\", RandBetween(-15,5), 0)\n                            )\n                        ),\n                    heuristic19:\n                        RandBetween(-8,8)\n\n                })\n        });\n\n        UpdateIf(colPF_MOVE_TREE, nodeID=pNodeID, {\n            postMoveEvalRecord: \n                Patch(LookUp(colPF_MOVE_TREE, nodeID=pNodeID).postMoveEvalRecord, {\n                    centipawn:\n                        With(\n                            LookUp(colPF_MOVE_TREE, nodeID=pNodeID) As theCurrentNodeUpdated,\n                            \n                            If(gblPF_DEBUG_EVAL,\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic11: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic11\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic17: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic17\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic18: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic18\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic19 the God of Randomness BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic19\n                                })\n                            );\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic11 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic17 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic18 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic19\n                        )\n                })\n        })\n    );\n\n    If(gblPF_DEBUG_EVAL,\n        With(\n            LookUp(colPF_MOVE_TREE, nodeID=pNodeID) As theCurrentNode,\n\n            Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                \" fCE_400(): san: \" & theCurrentNode.inactiveColorMoveRecord.san &\n                \" pacn: \" & theCurrentNode.inactiveColorMoveRecord.pacn &\n                \" centipawn: \" & theCurrentNode.postMoveEvalRecord.centipawn\n            })\n        )\n    )\n);\n\nIf(gblPF_DEBUG_EVAL,\n    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \" fCE_400(): exiting\"})\n)\n\n",
        "Property": "fCE_400",
        "RuleProviderType": "System"
      },
      {
        "Category": "Behavior",
        "InvariantScript": "\nIf(gblPF_DEBUG_EVAL,\n    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n        \" comChessEngineFunctions.fCE_200(): entered pNodeID: \" & pNodeID\n    })\n);\n\nWith(\n    LookUp(colPF_DYNAMIC_DATA, dataName=DYNAMIC_DATA_PF_NAME) As theData,\n\n    With(\n        LookUp(colPF_MOVE_TREE, nodeID=pNodeID) As theCurrentNode,\n\n        If(gblPF_DEBUG_EVAL,\n            Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                \" fCE_200(): san: \" & theCurrentNode.inactiveColorMoveRecord.san &\n                \" pacn: \" & theCurrentNode.inactiveColorMoveRecord.pacn &\n                \" move color: \" & UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN) &\n                \" captureSquareOccupier: \" & theCurrentNode.inactiveColorMoveRecord.captureSquareOccupier\n            })\n        );\n\n        Patch(colPF_MOVE_TREE, First(Filter(colPF_MOVE_TREE, nodeID=pNodeID)), {\n            postMoveEvalRecord: \n                Patch(EVAL_RECORD_PF, {\n                    heuristic11:\n                        // the dumb bully part\n                        Sum(\n                            ForAll(\n                                Split(UDF_FEN_TO_PIECE_PLACEMENT(theCurrentNode.postMoveFEN), \"\") As thePiece,\n\n                                UDF_getPieceCentipawnMaterialValue(thePiece.Value, \"QRBNPqrbnp\")\n                            ),\n                            Value\n                        ) -\n                        Sum(\n                            ForAll(\n                                Split(UDF_FEN_TO_PIECE_PLACEMENT(theCurrentNode.preMoveFEN), \"\") As thePiece,\n\n                                UDF_getPieceCentipawnMaterialValue(thePiece.Value, \"QRBNPqrbnp\")\n                            ),\n                            Value\n                        ),\n                    heuristic19:\n                        // add a touch of randomness\n                        RandBetween(-5,5)\n                })\n        });\n\n        UpdateIf(colPF_MOVE_TREE, nodeID=pNodeID, {\n            postMoveEvalRecord: \n                Patch(LookUp(colPF_MOVE_TREE, nodeID=pNodeID).postMoveEvalRecord, {\n                    centipawn:\n                        With(\n                            LookUp(colPF_MOVE_TREE, nodeID=pNodeID) As theCurrentNodeUpdated,\n                            \n                            If(gblPF_DEBUG_EVAL,\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic11 Basic Material BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic11\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic19 the God of Randomness BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic19\n                                })\n                            );\n                            Sum(\n                                theCurrentNodeUpdated.postMoveEvalRecord.heuristic11,\n                                theCurrentNodeUpdated.postMoveEvalRecord.heuristic19\n                            )\n                        )\n                })\n        })\n    );\n\n    If(gblPF_DEBUG_EVAL,\n        With(\n            LookUp(colPF_MOVE_TREE, nodeID=pNodeID) As theCurrentNode,\n\n            Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                \" fCE_200(): san: \" & theCurrentNode.inactiveColorMoveRecord.san &\n                \" pacn: \" & theCurrentNode.inactiveColorMoveRecord.pacn &\n                \" centipawn: \" & theCurrentNode.postMoveEvalRecord.centipawn\n            })\n        )\n    )\n);\n\nIf(gblPF_DEBUG_EVAL,\n    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \" fCE_200(): exiting\"})\n)\n\n",
        "Property": "fCE_200",
        "RuleProviderType": "System"
      },
      {
        "Category": "Behavior",
        "InvariantScript": "\nIf(gblPF_DEBUG_EVAL,\n    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n        \" comChessEngineFunctions.fME_EvaluateMove(): entered pNodeID: \" & pNodeID\n    })\n);\n\nWith(\n    LookUp(colPF_DYNAMIC_DATA, dataName=DYNAMIC_DATA_PF_NAME) As theData,\n\n    With(\n        LookUp(colPF_MOVE_TREE, nodeID=pNodeID) As theCurrentNode,\n\n        If(gblPF_DEBUG_EVAL,\n            Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                \" fME_EvaluateMove(): san: \" & theCurrentNode.inactiveColorMoveRecord.san &\n                \" pacn: \" & theCurrentNode.inactiveColorMoveRecord.pacn &\n                \" move color: \" & UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN) &\n                \" captureSquareOccupier: \" & theCurrentNode.inactiveColorMoveRecord.captureSquareOccupier\n            })\n        );\n\n        // determine which player's turn it is, and then see what their computer setting is currently set to\n        With(\n            {\n                selectedEngine: If(UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN)=WHITE, drpWhitePiecesCE.Selected.Value, drpBlackPiecesCE.Selected.Value)\n            } As theEngine,\n\n            If(gblPF_DEBUG_TIMERS,\n                If(IsBlank(LookUp(colPF_Timers, timerName=\"comChessEngineFunctions.fME_EvaluateMove\")),\n                    Collect(colPF_Timers, {timerName:\"comChessEngineFunctions.fME_EvaluateMove\", startTime: Now(), stopTime: Blank() }),\n                    UpdateIf(colPF_Timers, timerName=\"comChessEngineFunctions.fME_EvaluateMove\", { startTime: Now(), stopTime: Blank() })\n                )\n            );\n            \n            Switch(true,\n                theEngine.selectedEngine=CE_PF_200,\n                    comChessEngineFunctions.fCE_200(pNodeID),\n                theEngine.selectedEngine=CE_PF_300,\n                    comChessEngineFunctions.fCE_300(pNodeID),\n                theEngine.selectedEngine=CE_PF_400,\n                    comChessEngineFunctions.fCE_400(pNodeID),\n                theEngine.selectedEngine=CE_PF_500,\n                    comChessEngineFunctions.fCE_500(pNodeID),\n                theEngine.selectedEngine=CE_PF_600,\n                    comChessEngineFunctions.fCE_600_preEvaluate();\n                    comChessEngineFunctions.fCE_600(pNodeID);\n                    comChessEngineFunctions.fCE_600_postEvaluate(),\n                    \n                // default\n                comChessEngineFunctions.fCE_100(pNodeID)\n            );\n\n            If(gblPF_DEBUG_TIMERS,\n                UpdateIf(colPF_Timers, timerName=\"comChessEngineFunctions.fME_EvaluateMove\", { stopTime: Now() });\n                With(\n                    LookUp(colPF_Timers, timerName=\"comChessEngineFunctions.fME_EvaluateMove\") As theTimer,\n\n                    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                        \" comChessEngineFunctions.fME_EvaluateMove(): elapsed time \" &\n                        Text(DateDiff(theTimer.startTime, theTimer.stopTime, TimeUnit.Milliseconds)/1000) & \" seconds\" &\n                        \" selectedEngine: \" & theEngine.selectedEngine\n                        \n                    })\n                )\n            )\n        )\n    )\n);\n\n\n\nCollect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \" fME_EvaluateMove(): exiting\"});\n",
        "Property": "fME_EvaluateMove",
        "RuleProviderType": "System"
      },
      {
        "Category": "Behavior",
        "InvariantScript": "If(gblPF_DEBUG_EVAL,\n    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n        \" comChessEngineFunctions.fME_getGamePhase(): entered pFEN: \" & pFEN\n    })\n);\n\nWith (\n    {\n        board:  UDF_FEN_TO_BOARD(pFEN),\n        ppd:    UDF_FEN_TO_PIECE_PLACEMENT(pFEN)\n    } As theBoard,\n\n    With (\n        {\n            whiteTotalDevelopment: Sum(\n                                    If(UDF_getBitAtSqNum(theBoard.board,51)=\"P\",0,1),\n                                    If(UDF_getBitAtSqNum(theBoard.board,52)=\"P\",0,1),\n                                    If(UDF_getBitAtSqNum(theBoard.board,56)=\"R\",0,1),\n                                    If(UDF_getBitAtSqNum(theBoard.board,57)=\"N\",0,1),\n                                    If(UDF_getBitAtSqNum(theBoard.board,58)=\"B\",0,1),\n                                    If(UDF_getBitAtSqNum(theBoard.board,59)=\"Q\",0,1),\n                                    If(UDF_getBitAtSqNum(theBoard.board,60)=\"K\",0,1),\n                                    If(UDF_getBitAtSqNum(theBoard.board,61)=\"B\",0,1),\n                                    If(UDF_getBitAtSqNum(theBoard.board,62)=\"N\",0,1),\n                                    If(UDF_getBitAtSqNum(theBoard.board,63)=\"R\",0,1)\n                                ),\n            blackTotalDevelopment: Sum(\n                                    If(UDF_getBitAtSqNum(theBoard.board,11)=\"p\",0,1),\n                                    If(UDF_getBitAtSqNum(theBoard.board,12)=\"p\",0,1),\n                                    If(UDF_getBitAtSqNum(theBoard.board,0)=\"r\",0,1),\n                                    If(UDF_getBitAtSqNum(theBoard.board,1)=\"n\",0,1),\n                                    If(UDF_getBitAtSqNum(theBoard.board,2)=\"b\",0,1),\n                                    If(UDF_getBitAtSqNum(theBoard.board,3)=\"q\",0,1),\n                                    If(UDF_getBitAtSqNum(theBoard.board,4)=\"k\",0,1),\n                                    If(UDF_getBitAtSqNum(theBoard.board,5)=\"b\",0,1),\n                                    If(UDF_getBitAtSqNum(theBoard.board,6)=\"n\",0,1),\n                                    If(UDF_getBitAtSqNum(theBoard.board,7)=\"r\",0,1)\n                                ),\n            whiteTotalMaterial: Sum(\n                                    ForAll(\n                                        Split(theBoard.ppd, \"\") As thePiece,\n\n                                        UDF_getPieceCentipawnMaterialValue(thePiece.Value, \"QRBNP\")\n                                    ),\n                                    Value\n                                ),\n            blackTotalMaterial: Abs(\n                                    Sum(\n                                        ForAll(\n                                            Split(theBoard.ppd, \"\") As thePiece,\n\n                                            UDF_getPieceCentipawnMaterialValue(thePiece.Value, \"qrbnp\")\n                                        ),\n                                        Value\n                                    )\n                                )\n        } As theMaterial,\n\n        If(UDF_FEN_TO_ACTIVE_COLOR(pFEN)=WHITE,\n            // THEN\n            Switch(true,\n                Min(theMaterial.whiteTotalMaterial, theMaterial.blackTotalMaterial)>=3000 && \n                theMaterial.whiteTotalDevelopment<5 &&\n                UDF_FEN_TO_FULLMOVE_COUNT(pFEN)<=10,\n                    GAME_PHASE_OPENING,\n                Min(theMaterial.whiteTotalMaterial, theMaterial.blackTotalMaterial)>=1700,\n                    GAME_PHASE_MIDDLE,\n\n                // default\n                GAME_PHASE_END\n            ),\n\n            // ELSE\n            Switch(true,\n                Min(theMaterial.whiteTotalMaterial, theMaterial.blackTotalMaterial)>=3000 && \n                theMaterial.blackTotalDevelopment<5 &&\n                UDF_FEN_TO_FULLMOVE_COUNT(pFEN)<=10,\n                    GAME_PHASE_OPENING,\n                Min(theMaterial.whiteTotalMaterial, theMaterial.blackTotalMaterial)>=1700,\n                    GAME_PHASE_MIDDLE,\n\n                // default\n                GAME_PHASE_END\n            )\n        )\n    )\n);\n",
        "Property": "fME_getGamePhase",
        "RuleProviderType": "System"
      },
      {
        "Category": "Behavior",
        "InvariantScript": "If(gblPF_DEBUG_EVAL,\n    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n        \" comChessEngineFunctions.fME_END_GAME(): entered pVersion: \" & pVersion &\n        \" pNodeID: \" & pNodeID\n    })\n);\n\nWith(\n    LookUp(colPF_DYNAMIC_DATA, dataName=DYNAMIC_DATA_PF_NAME) As theData,\n\n    With(\n        LookUp(colPF_MOVE_TREE, nodeID=pNodeID) As theCurrentNode,\n\n        If(gblPF_DEBUG_EVAL,\n            Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                \" fME_END_GAME(): san: \" & theCurrentNode.inactiveColorMoveRecord.san &\n                \" pacn: \" & theCurrentNode.inactiveColorMoveRecord.pacn &\n                \" move color: \" & UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN) &\n                \" captureSquareOccupier: \" & theCurrentNode.inactiveColorMoveRecord.captureSquareOccupier\n            })\n        );\n\n        Sum(0,\n            With (\n                {\n                    ppd:    UDF_FEN_TO_PIECE_PLACEMENT(theCurrentNode.postMoveFEN),\n                    filterScreen: If(UDF_FEN_TO_INACTIVE_COLOR(theCurrentNode.postMoveFEN)=WHITE,\"QRBNP\",\"qrbnp\")\n                } As localVars,\n\n                With(\n                    {\n                        totalOpponentMaterial: Sum(\n                                                ForAll(\n                                                    Split(localVars.ppd, \"\") As thePiece,\n\n                                                    UDF_getPieceCentipawnMaterialValue(thePiece.Value, localVars.filterScreen)\n                                                ),\n                                                Value\n                                            )\n                    } As localVars,\n\n                    If(localVars.totalOpponentMaterial<>0,\n                        // THEN\n                        0,\n\n                        // ELSE - we are playing against king only\n                        Sum(0,\n                            If(theCurrentNode.inactiveColorMoveRecord.sourceSquareOccupier in \"P\", 25, 0)\n                        )\n                    )\n                )\n            )\n        )\n    )\n);\n\n// no exit logging or will mess up return code\n",
        "Property": "fME_END_GAME",
        "RuleProviderType": "System"
      },
      {
        "Category": "Behavior",
        "InvariantScript": "\nIf(gblPF_DEBUG_EVAL,\n    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n        \" comChessEngineFunctions.fCE_500(): entered pNodeID: \" & pNodeID\n    })\n);\n\nWith(\n    LookUp(colPF_DYNAMIC_DATA, dataName=DYNAMIC_DATA_PF_NAME) As theData,\n\n    With(\n        LookUp(colPF_MOVE_TREE, nodeID=pNodeID) As theCurrentNode,\n\n        If(gblPF_DEBUG_EVAL,\n            Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                \" fCE_500(): san: \" & theCurrentNode.inactiveColorMoveRecord.san &\n                \" pacn: \" & theCurrentNode.inactiveColorMoveRecord.pacn &\n                \" move color: \" & UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN) &\n                \" captureSquareOccupier: \" & theCurrentNode.inactiveColorMoveRecord.captureSquareOccupier\n            })\n        );\n\n        Patch(colPF_MOVE_TREE, First(Filter(colPF_MOVE_TREE, nodeID=pNodeID)), {\n            postMoveEvalRecord: \n                Patch(EVAL_RECORD_PF, {\n                    heuristic11:\n                        With(\n                            {\n                                materialDelta:\n                                    Sum(\n                                        ForAll(\n                                            Split(UDF_FEN_TO_PIECE_PLACEMENT(theCurrentNode.postMoveFEN), \"\") As thePiece,\n\n                                            UDF_getPieceCentipawnMaterialValue(thePiece.Value, \"QRBNPqrbnp\")\n                                        ),\n                                        Value\n                                    ) -\n                                    Sum(\n                                        ForAll(\n                                            Split(UDF_FEN_TO_PIECE_PLACEMENT(theCurrentNode.preMoveFEN), \"\") As thePiece,\n\n                                            UDF_getPieceCentipawnMaterialValue(thePiece.Value, \"QRBNPqrbnp\")\n                                        ),\n                                        Value\n                                    ),\n                                materialSource:\n                                    UDF_getPieceCentipawnMaterialValue(\n                                        theCurrentNode.inactiveColorMoveRecord.sourceSquareOccupier,\n                                        \"KQRBNPkqrbnp\"\n                                    ),\n                                materialCapture: \n                                    UDF_getPieceCentipawnMaterialValue(\n                                        theCurrentNode.inactiveColorMoveRecord.captureSquareOccupier,\n                                        \"KQRBNPkqrbnp\"\n                                    ),\n                                targetSqAttacked:\n                                    UDF_isSqNumAttacked(\n                                        theCurrentNode.postMoveBoard,\n                                        theCurrentNode.inactiveColorMoveRecord.targetSquareNum,\n                                        UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.postMoveFEN)\n                                    )\n                            } As localVars,\n\n                            If(!localVars.targetSqAttacked || (Abs(localVars.materialSource)<Abs(localVars.materialCapture)),\n                                // THEN\n                                localVars.materialDelta,\n\n                                // ELSE - discourage the move\n                                If(UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN)=WHITE,-25,25)\n                            )\n                        ),\n                    heuristic12:\n                        // no capture - but moving an attacked piece to a unattacked square needs a small bonus\n                        With(\n                            {\n                                materialDelta:\n                                    Sum(\n                                        ForAll(\n                                            Split(UDF_FEN_TO_PIECE_PLACEMENT(theCurrentNode.postMoveFEN), \"\") As thePiece,\n\n                                            UDF_getPieceCentipawnMaterialValue(thePiece.Value, \"QRBNPqrbnp\")\n                                        ),\n                                        Value\n                                    ) -\n                                    Sum(\n                                        ForAll(\n                                            Split(UDF_FEN_TO_PIECE_PLACEMENT(theCurrentNode.preMoveFEN), \"\") As thePiece,\n\n                                            UDF_getPieceCentipawnMaterialValue(thePiece.Value, \"QRBNPqrbnp\")\n                                        ),\n                                        Value\n                                    ),\n                                materialSource:\n                                    UDF_getPieceCentipawnMaterialValue(\n                                        theCurrentNode.inactiveColorMoveRecord.sourceSquareOccupier,\n                                        \"KQRBNPkqrbnp\"\n                                    ),\n                                sourceSqAttacked:\n                                    UDF_isSqNumAttacked(\n                                        theCurrentNode.preMoveBoard,\n                                        theCurrentNode.inactiveColorMoveRecord.sourceSquareNum,\n                                        UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.postMoveFEN)\n                                    ),\n                                targetSqAttacked:\n                                    UDF_isSqNumAttacked(\n                                        theCurrentNode.postMoveBoard,\n                                        theCurrentNode.inactiveColorMoveRecord.targetSquareNum,\n                                        UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.postMoveFEN)\n                                    )\n                            } As localVars,\n\n                            If(localVars.sourceSqAttacked && !localVars.targetSqAttacked && localVars.materialDelta=0,\n                                // THEN\n                                If(UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN)=WHITE,RandBetween(50,75),RandBetween(-75,-50)),\n\n                                // ELSE\n                                0\n                            )\n                        ),\n\n                    heuristic16:\n                        If(!(comChessEngineFunctions.fME_getGamePhase(theCurrentNode.preMoveFEN)=GAME_PHASE_END),\n                            // THEN - not in the END GAME\n                            0,\n\n                            // ELSE - do END GAME analysis\n                            With(\n                                {\n                                    totalWhiteBonus:\n                                        Sum(\n                                            // Sum: Push Pawns forward - push the pawns forward (until we have enough Qs) - is this a pawn move ?\n                                            If(theCurrentNode.inactiveColorMoveRecord.sourceSquareOccupier in \"P\" && UDF_countPiecesOnBoard(theCurrentNode.preMoveBoard, \"Q\")<3,\n                                                // THEN - push the pawn and bump up the promotion to a Q\n                                                If(\n                                                    (IsBlank(theCurrentNode.inactiveColorMoveRecord.promoteTo) || theCurrentNode.inactiveColorMoveRecord.promoteTo in \"Q\") &&\n                                                    !UDF_isSqNumAttacked(\n                                                        theCurrentNode.postMoveBoard,\n                                                        theCurrentNode.inactiveColorMoveRecord.targetSquareNum,\n                                                        UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.postMoveFEN)\n                                                    ),\n                                                    // THEN\n                                                    UDF_getRankFromSqName(theCurrentNode.inactiveColorMoveRecord.targetSquareName) * RandBetween(8,13),\n\n                                                    // ELSE\n                                                    0\n                                                ),\n                                                // ELSE\n                                                0\n                                            ),\n\n                                            // Sum: trapping the king\n                                            With(\n                                                {\n                                                    sqNum:\n                                                        UDF_SearchBoardForPiece(theCurrentNode.preMoveBoard, UDF_getICPieceABBR(theCurrentNode.preMoveFEN, \"k\"))\n                                                } As theKing,\n\n                                                If(gblPF_DEBUG_EVAL,\n                                                    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                        \" fCE_500(): DEBUG heuristic16 theKing.sqNum: \" & UDF_sqNumToSqName(theKing.sqNum) & \"(\" & theKing.sqNum & \")\" \n                                                    });\n                                                    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                        \" current kingDangerBoard: \" & theCurrentNode.postMoveActiveKingDangerBoard \n                                                    });\n                                                );\n\n                                                With(\n                                                    {\n                                                        adjSquaresSet:  UDF_createSetOfSqNames(UDF_sqNumToAdjacentSqNames(theKing.sqNum) & \" \" &  UDF_sqNumToSqName(theKing.sqNum)),\n                                                        noKingPreMoveBoard: UDF_setBitAtSqNum(theCurrentNode.preMoveBoard,EMPTY_FILLER_ABBR,theKing.sqNum),\n                                                        noKingPostMoveBoard:    UDF_setBitAtSqNum(theCurrentNode.postMoveBoard,EMPTY_FILLER_ABBR,theKing.sqNum),\n                                                        // remove the moving piece so that we can determine if we can move to an adjacent protected square\n                                                        noKingNoPiecePostMoveBoard:\n                                                            UDF_setBitAtSqNum(\n                                                                UDF_setBitAtSqNum(theCurrentNode.postMoveBoard,\n                                                                    EMPTY_FILLER_ABBR,\n                                                                    theCurrentNode.inactiveColorMoveRecord.targetSquareNum\n                                                                ),\n                                                                EMPTY_FILLER_ABBR,\n                                                                theKing.sqNum\n                                                            )\n                                                    } As nextToKing,\n\n                                                    If(gblPF_DEBUG_EVAL,\n                                                        Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                            \" fCE_500(): DEBUG heuristic16 theKing.sqNum: \" & UDF_sqNumToSqName(theKing.sqNum) & \"(\" & theKing.sqNum & \")\" &\n                                                            \" adjSquaresSet: \" & nextToKing.adjSquaresSet\n                                                        });\n                                                        Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                            \" premove no king board: \" & nextToKing.noKingPreMoveBoard\n                                                        });\n                                                        Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                            \" postmove no king board: \" & nextToKing.noKingPostMoveBoard\n                                                        });\n                                                    );\n\n                                                    With(\n                                                        {\n                                                            numAdjSquaresAttackedPreMove:\n                                                                UDF_getSetSize(\n                                                                    UDF_createSetOfSqNames(\n                                                                        Concat(\n                                                                            ForAll(\n                                                                                Split(nextToKing.adjSquaresSet, \" \") As adjSqName,\n\n                                                                                If(gblPF_DEBUG_EVAL,\n                                                                                    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                                                        \" fCE_500(): DEBUG heuristic16 adjSqName.Value: \" & adjSqName.Value &\n                                                                                        \" premove AttackerSet: \" &\n                                                                                            UDF_getAttackerSqNamesSet(\n                                                                                                nextToKing.noKingPreMoveBoard,\n                                                                                                UDF_sqNameToSqNum(adjSqName.Value),\n                                                                                                UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN)\n                                                                                            )\n                                                                                    })\n                                                                                );\n\n                                                                                If(\n                                                                                    UDF_getSetSize(\n                                                                                        UDF_getAttackerSqNamesSet(\n                                                                                            nextToKing.noKingPreMoveBoard,\n                                                                                            UDF_sqNameToSqNum(adjSqName.Value),\n                                                                                            UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN)\n                                                                                        )\n                                                                                    )>0,\n                                                                                    adjSqName.Value, \"\"\n                                                                                )\n                                                                            ), Value, \" \"\n                                                                        )\n                                                                    )\n                                                                ),\n                                                            numAdjSquaresAttackedPostMove:\n                                                                UDF_getSetSize(\n                                                                    UDF_createSetOfSqNames(\n                                                                        Concat(\n                                                                            ForAll(\n                                                                                Split(nextToKing.adjSquaresSet, \" \") As adjSqName,\n\n                                                                                If(gblPF_DEBUG_EVAL,\n                                                                                    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                                                        \" fCE_500(): DEBUG heuristic16 adjSqName.Value: \" & adjSqName.Value &\n                                                                                        \" postmove AttackerSet: \" &\n                                                                                            UDF_getAttackerSqNamesSet(\n                                                                                                nextToKing.noKingPostMoveBoard,\n                                                                                                UDF_sqNameToSqNum(adjSqName.Value),\n                                                                                                UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN)\n                                                                                            )\n                                                                                    })\n                                                                                );\n\n                                                                                If(\n                                                                                    UDF_getSetSize(\n                                                                                        UDF_getAttackerSqNamesSet(\n                                                                                            nextToKing.noKingPostMoveBoard,\n                                                                                            UDF_sqNameToSqNum(adjSqName.Value),\n                                                                                            UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN)\n                                                                                        )\n                                                                                    )>0,\n                                                                                    adjSqName.Value, \"\"\n                                                                                )\n                                                                            ), Value, \" \"\n                                                                        )\n                                                                    )\n                                                                ),\n                                                            numTargetSquareAttackedPostMove:\n                                                                If(theCurrentNode.inactiveColorMoveRecord.targetSquareName in nextToKing.adjSquaresSet,\n                                                                    // THEN\n                                                                    UDF_getSetSize(\n                                                                        UDF_getAttackerSqNamesSet(\n                                                                            nextToKing.noKingNoPiecePostMoveBoard,\n                                                                            theCurrentNode.inactiveColorMoveRecord.targetSquareNum,\n                                                                            UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN)\n                                                                        )\n                                                                    ),\n\n                                                                    // ELSE\n                                                                    0\n                                                                )\n                                                        } As attackData,\n\n                                                        If(gblPF_DEBUG_EVAL,\n                                                            Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                                \" fCE_500(): DEBUG heuristic16 theKing.sqNum: \" & UDF_sqNumToSqName(theKing.sqNum) & \"(\" & theKing.sqNum & \")\" &\n                                                                \" numAdjSquaresAttackedPreMove: \" & attackData.numAdjSquaresAttackedPreMove &\n                                                                \" numAdjSquaresAttackedPostMove: \" & attackData.numAdjSquaresAttackedPostMove &\n                                                                \" numTargetSquareAttackedPostMove: \" & attackData.numTargetSquareAttackedPostMove\n                                                            })\n                                                        );\n\n                                                        With(\n                                                            {\n                                                                preMove:\n                                                                    If(\n                                                                        UDF_countSqNumAttacks(\n                                                                            nextToKing.noKingPreMoveBoard,\n                                                                            theKing.sqNum,\n                                                                            UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN)\n                                                                        )>0,\n                                                                        true,false\n                                                                    ),\n                                                                postMove:\n                                                                    If(\n                                                                        UDF_countSqNumAttacks(\n                                                                            nextToKing.noKingPostMoveBoard,\n                                                                            theKing.sqNum,\n                                                                            UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN)\n                                                                        )>0,\n                                                                        true,false\n                                                                    )\n                                                            } As theKingChecked,\n\n                                                            If(gblPF_DEBUG_EVAL,\n                                                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                                    \" fCE_500(): DEBUG heuristic16 preMove\" & \n                                                                    \" # of adj Squares: \" & UDF_getSetSize(nextToKing.adjSquaresSet) &\n                                                                    \" theKingChecked.preMove: \" & theKingChecked.preMove &\n                                                                    \" theKingChecked.postMove: \" & theKingChecked.postMove &\n                                                                    \" numAdjSquaresAttackedPreMove: \" & attackData.numAdjSquaresAttackedPreMove &\n                                                                    \" numAdjSquaresAttackedPostMove: \" & attackData.numAdjSquaresAttackedPostMove\n                                                                })\n                                                            );\n                                                            If((UDF_getSetSize(nextToKing.adjSquaresSet) - attackData.numAdjSquaresAttackedPostMove)=1 && !theKingChecked.postMove,\n                                                                // THEN - this move would cause a stalemate\n                                                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                                    \" fCE_500(): DEBUG heuristic16 postmove stalemate detected \"\n                                                                });\n                                                                -1000,  // discourage the move\n\n                                                                // ELSE\n                                                                If(\n                                                                    theCurrentNode.inactiveColorMoveRecord.targetSquareName in nextToKing.adjSquaresSet &&\n                                                                    attackData.numTargetSquareAttackedPostMove=0,\n                                                                    // THEN - king can reach us and we are not protected - discourage move\n                                                                    -50,\n\n                                                                    // ELSE\n                                                                    If(attackData.numAdjSquaresAttackedPostMove=UDF_getSetSize(nextToKing.adjSquaresSet),\n                                                                        // THEN - checkmate !\n                                                                        Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                                            \" checkmate FEN: \" & theCurrentNode.preMoveFEN\n                                                                        });\n                                                                        10000, // strongly encourage the move\n                                                                        // ELSE - encourage the move if warranted\n                                                                        (attackData.numAdjSquaresAttackedPostMove - attackData.numAdjSquaresAttackedPreMove) * 21\n                                                                    )\n                                                                )\n                                                            )\n                                                        )\n                                                    )\n                                                )\n                                            ),\n\n                                            // Sum: TBD...\n                                            0\n                                        )\n                                } As totalBonus,\n\n                                If(UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN)=WHITE,totalBonus.totalWhiteBonus,-totalBonus.totalWhiteBonus)\n                            )\n                        ),\n\n                    heuristic18:\n                        // add some order\n                        If(UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN)=WHITE,\n                            // THEN\n                            Switch(comChessEngineFunctions.fME_getGamePhase(theCurrentNode.preMoveFEN),\n                                GAME_PHASE_OPENING,\n                                    If(\n                                        theCurrentNode.inactiveColorMoveRecord.sourceSquareOccupier in \"NP\" ||\n                                        IsMatch(theCurrentNode.inactiveColorMoveRecord.san, \"O-O\", MatchOptions.BeginsWith),\n                                            // THEN\n                                            RandBetween(-5,15),\n                                            \n                                            // ELSE\n                                            0\n                                    ),\n                                GAME_PHASE_MIDDLE,\n                                    If(theCurrentNode.inactiveColorMoveRecord.sourceSquareOccupier in \"QBNP\", RandBetween(-5,15), 0),\n                                If(theCurrentNode.inactiveColorMoveRecord.sourceSquareOccupier in \"QR\", RandBetween(-5,10), 0)\n                            ),\n\n                            // ELSE\n                            Switch(comChessEngineFunctions.fME_getGamePhase(theCurrentNode.preMoveFEN),\n                                GAME_PHASE_OPENING,\n                                    If(\n                                        theCurrentNode.inactiveColorMoveRecord.sourceSquareOccupier in \"NP\" ||\n                                        IsMatch(theCurrentNode.inactiveColorMoveRecord.san, \"O-O\", MatchOptions.BeginsWith),\n                                            // THEN\n                                            RandBetween(-15,-5),\n                                            \n                                            // ELSE\n                                            0\n                                    ),\n                                GAME_PHASE_MIDDLE,\n                                    If(theCurrentNode.inactiveColorMoveRecord.sourceSquareOccupier in \"QBNP\", RandBetween(-15,5), 0),\n                                If(theCurrentNode.inactiveColorMoveRecord.sourceSquareOccupier in \"QR\", RandBetween(-10,5), 0)\n                            )\n                        ),\n                    heuristic19:\n                        RandBetween(-8,8)\n\n                })\n        });\n\n        UpdateIf(colPF_MOVE_TREE, nodeID=pNodeID, {\n            postMoveEvalRecord: \n                Patch(LookUp(colPF_MOVE_TREE, nodeID=pNodeID).postMoveEvalRecord, {\n                    centipawn:\n                        With(\n                            LookUp(colPF_MOVE_TREE, nodeID=pNodeID) As theCurrentNodeUpdated,\n                            \n                            If(gblPF_DEBUG_EVAL,\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic11: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic11\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic12: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic12\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic16: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic16\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic18: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic18\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic19 the God of Randomness BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic19\n                                })\n                            );\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic11 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic12 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic16 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic18 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic19\n                        )\n                })\n        })\n    );\n\n    If(gblPF_DEBUG_EVAL,\n        With(\n            LookUp(colPF_MOVE_TREE, nodeID=pNodeID) As theCurrentNode,\n\n            Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                \" fCE_500(): san: \" & theCurrentNode.inactiveColorMoveRecord.san &\n                \" pacn: \" & theCurrentNode.inactiveColorMoveRecord.pacn &\n                \" centipawn: \" & theCurrentNode.postMoveEvalRecord.centipawn\n            })\n        )\n    )\n);\n\nIf(gblPF_DEBUG_EVAL,\n    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \" fCE_500(): exiting\"})\n)\n\n",
        "Property": "fCE_500",
        "RuleProviderType": "System"
      },
      {
        "Category": "Behavior",
        "InvariantScript": "\nIf(gblPF_DEBUG_EVAL,\n    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n        \" comChessEngineFunctions.fCE_600(): entered pNodeID: \" & pNodeID\n    })\n);\n\nWith(\n    LookUp(colPF_DYNAMIC_DATA, dataName=DYNAMIC_DATA_PF_NAME) As theData,\n\n    With(\n        LookUp(colPF_MOVE_TREE, nodeID=pNodeID) As theCurrentNode,\n\n        If(gblPF_DEBUG_EVAL,\n            Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                \" fCE_600(): san: \" & theCurrentNode.inactiveColorMoveRecord.san &\n                \" pacn: \" & theCurrentNode.inactiveColorMoveRecord.pacn &\n                \" move color: \" & UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN) &\n                \" captureSquareOccupier: \" & theCurrentNode.inactiveColorMoveRecord.captureSquareOccupier\n            })\n        );\n\n        Patch(colPF_MOVE_TREE, First(Filter(colPF_MOVE_TREE, nodeID=pNodeID)), {\n            postMoveEvalRecord: \n                Patch(EVAL_RECORD_PF, {\n                    heuristic11:\n                        With(\n                            {\n                                materialDelta:\n                                    Sum(\n                                        ForAll(\n                                            Split(UDF_FEN_TO_PIECE_PLACEMENT(theCurrentNode.postMoveFEN), \"\") As thePiece,\n\n                                            UDF_getPieceCentipawnMaterialValue(thePiece.Value, \"QRBNPqrbnp\")\n                                        ),\n                                        Value\n                                    ) -\n                                    Sum(\n                                        ForAll(\n                                            Split(UDF_FEN_TO_PIECE_PLACEMENT(theCurrentNode.preMoveFEN), \"\") As thePiece,\n\n                                            UDF_getPieceCentipawnMaterialValue(thePiece.Value, \"QRBNPqrbnp\")\n                                        ),\n                                        Value\n                                    ),\n                                materialSource:\n                                    UDF_getPieceCentipawnMaterialValue(\n                                        theCurrentNode.inactiveColorMoveRecord.sourceSquareOccupier,\n                                        \"KQRBNPkqrbnp\"\n                                    ),\n                                materialCapture: \n                                    UDF_getPieceCentipawnMaterialValue(\n                                        theCurrentNode.inactiveColorMoveRecord.captureSquareOccupier,\n                                        \"KQRBNPkqrbnp\"\n                                    ),\n                                targetSqAttacked:\n                                    UDF_isSqNumAttacked(\n                                        theCurrentNode.postMoveBoard,\n                                        theCurrentNode.inactiveColorMoveRecord.targetSquareNum,\n                                        UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.postMoveFEN)\n                                    )\n                            } As localVars,\n\n                            If(!localVars.targetSqAttacked || (Abs(localVars.materialSource)<=Abs(localVars.materialCapture)),\n                                // THEN\n                                localVars.materialDelta,\n\n                                // ELSE - discourage the move\n                                If(UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN)=WHITE,-25,25)\n                            )\n                        ),\n                    heuristic12:\n                        // no capture - but moving an attacked piece to a unattacked square needs a small bonus\n                        With(\n                            {\n                                materialDelta:\n                                    Sum(\n                                        ForAll(\n                                            Split(UDF_FEN_TO_PIECE_PLACEMENT(theCurrentNode.postMoveFEN), \"\") As thePiece,\n\n                                            UDF_getPieceCentipawnMaterialValue(thePiece.Value, \"QRBNPqrbnp\")\n                                        ),\n                                        Value\n                                    ) -\n                                    Sum(\n                                        ForAll(\n                                            Split(UDF_FEN_TO_PIECE_PLACEMENT(theCurrentNode.preMoveFEN), \"\") As thePiece,\n\n                                            UDF_getPieceCentipawnMaterialValue(thePiece.Value, \"QRBNPqrbnp\")\n                                        ),\n                                        Value\n                                    ),\n                                materialSource:\n                                    UDF_getPieceCentipawnMaterialValue(\n                                        theCurrentNode.inactiveColorMoveRecord.sourceSquareOccupier,\n                                        \"KQRBNPkqrbnp\"\n                                    ),\n                                sourceSqAttacked:\n                                    UDF_isSqNumAttacked(\n                                        theCurrentNode.preMoveBoard,\n                                        theCurrentNode.inactiveColorMoveRecord.sourceSquareNum,\n                                        UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.postMoveFEN)\n                                    ),\n                                targetSqAttacked:\n                                    UDF_isSqNumAttacked(\n                                        theCurrentNode.postMoveBoard,\n                                        theCurrentNode.inactiveColorMoveRecord.targetSquareNum,\n                                        UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.postMoveFEN)\n                                    )\n                            } As localVars,\n\n                            If(localVars.sourceSqAttacked && (!localVars.targetSqAttacked) && localVars.materialDelta=0,\n                                // THEN\n                                If(UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN)=WHITE,RandBetween(25,35),RandBetween(-35,-25)),\n\n                                // ELSE\n                                0\n                            )\n                        ),\n\n                    heuristic15:\n                        If(!(comChessEngineFunctions.fME_getGamePhase(theCurrentNode.preMoveFEN)=GAME_PHASE_OPENING),\n                            // THEN\n                            With(\n                                {\n                                    gettingForkedPieces:   If(UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN)=WHITE,\"kqrbnp\",\"KQRBNP\"),\n                                    forkingPieces:         If(UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN)=WHITE,\"KQRBNP\",\"kqrbnp\")\n                                } As forkPieces,\n\n                                With(\n                                    {\n                                        gettingForkedSet:   UDF_getSetOfOccupiedSqNames(theCurrentNode.postMoveBoard, forkPieces.gettingForkedPieces),\n                                        forkingSet:         UDF_getSetOfOccupiedSqNames(theCurrentNode.postMoveBoard, forkPieces.forkingPieces)\n                                    } As forkSets,\n                                    \n                                    With(\n                                        {\n                                            targetTargetsSet:\n                                                // get only the eligibleSqName column\n                                                UDF_createSetOfSqNames(\n                                                    Concat(\n                                                        ShowColumns(\n                                                            Filter(colPF_LEGAL_MOVES,\n                                                                sqNum=theCurrentNode.inactiveColorMoveRecord.targetSquareNum,\n                                                                pieceUpper=Upper(theCurrentNode.inactiveColorMoveRecord.sourceSquareOccupier),\n                                                                eligibleSqName in forkSets.gettingForkedSet,\n                                                                UDF_getSetSize(  \n                                                                    UDF_getSetIntersection(\n                                                                        slideOvers,\n                                                                        UDF_getSetUnion(forkSets.forkingSet,forkSets.gettingForkedSet)\n                                                                    )\n                                                                )=0\n                                                            ), eligibleSqName\n                                                        ), eligibleSqName, \" \"\n                                                    )\n                                                ),\n                                            targetIsAttacked:\n                                                UDF_isSqNumAttacked(\n                                                    theCurrentNode.postMoveBoard, \n                                                    theCurrentNode.inactiveColorMoveRecord.targetSquareNum,\n                                                    UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.postMoveFEN)\n                                                )\n                                        } As targetData,\n\n                                        If(gblPF_DEBUG_EVAL,\n                                            Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                \" fCE_600(): DEBUG heuristic15\" & \n                                                \" gettingForkedSet: \" & forkSets.gettingForkedSet &\n                                                \" forkingSet: \" & forkSets.forkingSet &\n                                                \" targetTargetsSet: \" & targetData.targetTargetsSet &\n                                                \" target IsAttacked?: \" & targetData.targetIsAttacked\n                                            })\n                                        );\n                                        If(targetData.targetIsAttacked,\n                                            // THEN\n                                            0,\n\n                                            // ELSE\n                                            With(\n                                                {\n                                                    attackedTargetTargetsCount:\n                                                        Sum(\n                                                            ForAll(\n                                                                Split(targetData.targetTargetsSet, \" \") As theTargets,\n\n                                                                If(\n                                                                    UDF_isSqNumAttacked(\n                                                                        theCurrentNode.postMoveBoard,\n                                                                        UDF_sqNameToSqNum(theTargets.Value),\n                                                                        UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.postMoveFEN)\n                                                                    ),\n                                                                    // THEN\n                                                                    1,\n\n                                                                    // ELSE\n                                                                    0\n                                                                )\n                                                            ), Value\n                                                        )\n                                                } As counts,\n\n                                                If(gblPF_DEBUG_EVAL,\n                                                    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                        \" fCE_600(): DEBUG heuristic15\" & \n                                                        \" attackedTargetTargetsCount: \" & counts.attackedTargetTargetsCount\n                                                    })\n                                                );\n\n                                                If(counts.attackedTargetTargetsCount>=UDF_getSetSize(targetData.targetTargetsSet),\n                                                    // THEN\n                                                    0,\n\n                                                    // ELSE\n                                                    If(UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN)=WHITE,55,-55)\n                                                )\n                                            )\n                                        )\n                                    )\n                                )\n                            ),\n\n                            // ELSE\n                            0\n                        ),\n\n                    heuristic16:\n                        If(!(comChessEngineFunctions.fME_getGamePhase(theCurrentNode.preMoveFEN)=GAME_PHASE_END),\n                            // THEN - not in the END GAME\n                            0,\n\n                            // ELSE - do END GAME analysis\n                            With(\n                                {\n                                    totalBonus:\n                                        Sum(\n                                            // Sum: Push Pawns forward - push the pawns forward (until we have enough Qs) - is this a pawn move ?\n                                            If(theCurrentNode.inactiveColorMoveRecord.sourceSquareOccupier in \"P\" && UDF_countPiecesOnBoard(theCurrentNode.preMoveBoard, \"Q\")<3,\n                                                // THEN - push the pawn and bump up the promotion to a Q\n                                                If(\n                                                    (IsBlank(theCurrentNode.inactiveColorMoveRecord.promoteTo) || theCurrentNode.inactiveColorMoveRecord.promoteTo in \"Q\") &&\n                                                    !UDF_isSqNumAttacked(\n                                                        theCurrentNode.postMoveBoard,\n                                                        theCurrentNode.inactiveColorMoveRecord.targetSquareNum,\n                                                        UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.postMoveFEN)\n                                                    ),\n                                                    // THEN\n                                                    If(UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN)=WHITE,\n                                                        UDF_getRankFromSqName(theCurrentNode.inactiveColorMoveRecord.targetSquareName),\n                                                        0 - UDF_getRankFromSqName(theCurrentNode.inactiveColorMoveRecord.targetSquareName)\n                                                     ) * RandBetween(8,13),\n\n                                                    // ELSE\n                                                    0\n                                                ),\n                                                // ELSE\n                                                0\n                                            ),\n\n                                            // Sum: trapping the king\n                                            With(\n                                                {\n                                                    sqNum:\n                                                        UDF_SearchBoardForPiece(theCurrentNode.preMoveBoard, UDF_getICPieceABBR(theCurrentNode.preMoveFEN, \"k\"))\n                                                } As theKing,\n\n                                                If(gblPF_DEBUG_EVAL,\n                                                    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                        \" fCE_600(): DEBUG heuristic16 theKing.sqNum: \" & UDF_sqNumToSqName(theKing.sqNum) & \"(\" & theKing.sqNum & \")\" \n                                                    });\n                                                    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                        \" current kingDangerBoard: \" & theCurrentNode.postMoveActiveKingDangerBoard \n                                                    });\n                                                );\n\n                                                With(\n                                                    {\n                                                        adjSquaresSet:  UDF_createSetOfSqNames(UDF_sqNumToAdjacentSqNames(theKing.sqNum) & \" \" &  UDF_sqNumToSqName(theKing.sqNum)),\n                                                        noKingPreMoveBoard: UDF_setBitAtSqNum(theCurrentNode.preMoveBoard,EMPTY_FILLER_ABBR,theKing.sqNum),\n                                                        noKingPostMoveBoard:    UDF_setBitAtSqNum(theCurrentNode.postMoveBoard,EMPTY_FILLER_ABBR,theKing.sqNum),\n                                                        // remove the moving piece so that we can determine if we can move to an adjacent protected square\n                                                        noKingNoPiecePostMoveBoard:\n                                                            UDF_setBitAtSqNum(\n                                                                UDF_setBitAtSqNum(theCurrentNode.postMoveBoard,\n                                                                    EMPTY_FILLER_ABBR,\n                                                                    theCurrentNode.inactiveColorMoveRecord.targetSquareNum\n                                                                ),\n                                                                EMPTY_FILLER_ABBR,\n                                                                theKing.sqNum\n                                                            )\n                                                    } As nextToKing,\n\n                                                    If(gblPF_DEBUG_EVAL,\n                                                        Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                            \" fCE_600(): DEBUG heuristic16 theKing.sqNum: \" & UDF_sqNumToSqName(theKing.sqNum) & \"(\" & theKing.sqNum & \")\" &\n                                                            \" adjSquaresSet: \" & nextToKing.adjSquaresSet\n                                                        });\n                                                        Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                            \" premove no king board: \" & nextToKing.noKingPreMoveBoard\n                                                        });\n                                                        Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                            \" postmove no king board: \" & nextToKing.noKingPostMoveBoard\n                                                        });\n                                                    );\n\n                                                    With(\n                                                        {\n                                                            numAdjSquaresAttackedPreMove:\n                                                                UDF_getSetSize(\n                                                                    UDF_createSetOfSqNames(\n                                                                        Concat(\n                                                                            ForAll(\n                                                                                Split(nextToKing.adjSquaresSet, \" \") As adjSqName,\n\n                                                                                If(gblPF_DEBUG_EVAL,\n                                                                                    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                                                        \" fCE_600(): DEBUG heuristic16 adjSqName.Value: \" & adjSqName.Value &\n                                                                                        \" premove AttackerSet: \" &\n                                                                                            UDF_getAttackerSqNamesSet(\n                                                                                                nextToKing.noKingPreMoveBoard,\n                                                                                                UDF_sqNameToSqNum(adjSqName.Value),\n                                                                                                UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN)\n                                                                                            )\n                                                                                    })\n                                                                                );\n\n                                                                                If(\n                                                                                    UDF_getSetSize(\n                                                                                        UDF_getAttackerSqNamesSet(\n                                                                                            nextToKing.noKingPreMoveBoard,\n                                                                                            UDF_sqNameToSqNum(adjSqName.Value),\n                                                                                            UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN)\n                                                                                        )\n                                                                                    )>0,\n                                                                                    adjSqName.Value, \"\"\n                                                                                )\n                                                                            ), Value, \" \"\n                                                                        )\n                                                                    )\n                                                                ),\n                                                            numAdjSquaresAttackedPostMove:\n                                                                UDF_getSetSize(\n                                                                    UDF_createSetOfSqNames(\n                                                                        Concat(\n                                                                            ForAll(\n                                                                                Split(nextToKing.adjSquaresSet, \" \") As adjSqName,\n\n                                                                                If(gblPF_DEBUG_EVAL,\n                                                                                    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                                                        \" fCE_600(): DEBUG heuristic16 adjSqName.Value: \" & adjSqName.Value &\n                                                                                        \" postmove AttackerSet: \" &\n                                                                                            UDF_getAttackerSqNamesSet(\n                                                                                                nextToKing.noKingPostMoveBoard,\n                                                                                                UDF_sqNameToSqNum(adjSqName.Value),\n                                                                                                UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN)\n                                                                                            )\n                                                                                    })\n                                                                                );\n\n                                                                                If(\n                                                                                    UDF_getSetSize(\n                                                                                        UDF_getAttackerSqNamesSet(\n                                                                                            nextToKing.noKingPostMoveBoard,\n                                                                                            UDF_sqNameToSqNum(adjSqName.Value),\n                                                                                            UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN)\n                                                                                        )\n                                                                                    )>0,\n                                                                                    adjSqName.Value, \"\"\n                                                                                )\n                                                                            ), Value, \" \"\n                                                                        )\n                                                                    )\n                                                                ),\n                                                            numTargetSquareAttackedPostMove:\n                                                                If(theCurrentNode.inactiveColorMoveRecord.targetSquareName in nextToKing.adjSquaresSet,\n                                                                    // THEN\n                                                                    UDF_getSetSize(\n                                                                        UDF_getAttackerSqNamesSet(\n                                                                            nextToKing.noKingNoPiecePostMoveBoard,\n                                                                            theCurrentNode.inactiveColorMoveRecord.targetSquareNum,\n                                                                            UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN)\n                                                                        )\n                                                                    ),\n\n                                                                    // ELSE\n                                                                    0\n                                                                )\n                                                        } As attackData,\n\n                                                        If(gblPF_DEBUG_EVAL,\n                                                            Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                                \" fCE_600(): DEBUG heuristic16 theKing.sqNum: \" & UDF_sqNumToSqName(theKing.sqNum) & \"(\" & theKing.sqNum & \")\" &\n                                                                \" numAdjSquaresAttackedPreMove: \" & attackData.numAdjSquaresAttackedPreMove &\n                                                                \" numAdjSquaresAttackedPostMove: \" & attackData.numAdjSquaresAttackedPostMove &\n                                                                \" numTargetSquareAttackedPostMove: \" & attackData.numTargetSquareAttackedPostMove\n                                                            })\n                                                        );\n\n                                                        With(\n                                                            {\n                                                                preMove:\n                                                                    If(\n                                                                        UDF_countSqNumAttacks(\n                                                                            nextToKing.noKingPreMoveBoard,\n                                                                            theKing.sqNum,\n                                                                            UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN)\n                                                                        )>0,\n                                                                        true,false\n                                                                    ),\n                                                                postMove:\n                                                                    If(\n                                                                        UDF_countSqNumAttacks(\n                                                                            nextToKing.noKingPostMoveBoard,\n                                                                            theKing.sqNum,\n                                                                            UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN)\n                                                                        )>0,\n                                                                        true,false\n                                                                    )\n                                                            } As theKingChecked,\n\n                                                            If(gblPF_DEBUG_EVAL,\n                                                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                                    \" fCE_600(): DEBUG heuristic16 preMove\" & \n                                                                    \" # of adj Squares: \" & UDF_getSetSize(nextToKing.adjSquaresSet) &\n                                                                    \" theKingChecked.preMove: \" & theKingChecked.preMove &\n                                                                    \" theKingChecked.postMove: \" & theKingChecked.postMove &\n                                                                    \" numAdjSquaresAttackedPreMove: \" & attackData.numAdjSquaresAttackedPreMove &\n                                                                    \" numAdjSquaresAttackedPostMove: \" & attackData.numAdjSquaresAttackedPostMove\n                                                                })\n                                                            );\n                                                            If((UDF_getSetSize(nextToKing.adjSquaresSet) - attackData.numAdjSquaresAttackedPostMove)=1 && !theKingChecked.postMove,\n                                                                // THEN - this move would cause a stalemate\n                                                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                                    \" fCE_600(): DEBUG heuristic16 postmove stalemate detected \"\n                                                                });\n                                                                -1000,  // discourage the move\n\n                                                                // ELSE\n                                                                If(\n                                                                    theCurrentNode.inactiveColorMoveRecord.targetSquareName in nextToKing.adjSquaresSet &&\n                                                                    attackData.numTargetSquareAttackedPostMove=0,\n                                                                    // THEN - king can reach us and we are not protected - discourage move\n                                                                    -50,\n\n                                                                    // ELSE\n                                                                    If(attackData.numAdjSquaresAttackedPostMove=UDF_getSetSize(nextToKing.adjSquaresSet),\n                                                                        // THEN - checkmate !\n                                                                        Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                                                                            \" checkmate FEN: \" & theCurrentNode.preMoveFEN\n                                                                        });\n                                                                        10000, // strongly encourage the move\n                                                                        \n                                                                        // ELSE - encourage the move if warranted - early in game reduce impact\n                                                                        If(attackData.numAdjSquaresAttackedPostMove>attackData.numAdjSquaresAttackedPreMove,\n                                                                            // THEN\n                                                                            (attackData.numAdjSquaresAttackedPostMove - attackData.numAdjSquaresAttackedPreMove) * 21,\n\n                                                                            // ELSE\n                                                                            0 \n                                                                        )\n                                                                    )\n                                                                )\n                                                            )\n                                                        )\n                                                    )\n                                                )\n                                            ),\n\n                                            // Sum: TBD...\n                                            0\n                                        )\n                                } As totalBonus,\n\n                                If(UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN)=WHITE,totalBonus.totalBonus,-totalBonus.totalBonus)\n                            )\n                        ),\n\n                    heuristic18:\n                        // add some order\n                        If(UDF_FEN_TO_ACTIVE_COLOR(theCurrentNode.preMoveFEN)=WHITE,\n                            // THEN\n                            Switch(comChessEngineFunctions.fME_getGamePhase(theCurrentNode.preMoveFEN),\n                                GAME_PHASE_OPENING,\n                                    Switch(true,\n                                        IsMatch(theCurrentNode.inactiveColorMoveRecord.san, \"O-O\", MatchOptions.BeginsWith),\n                                            RandBetween(10,25),\n                                        theCurrentNode.inactiveColorMoveRecord.sourceSquareOccupier in \"BNP\" && Text(theCurrentNode.inactiveColorMoveRecord.moveDirection) in \"128\",\n                                            RandBetween(0,15),\n                                            \n                                        // default\n                                            0\n                                    ),\n                                GAME_PHASE_MIDDLE,\n                                    Switch(true,\n                                        IsMatch(theCurrentNode.inactiveColorMoveRecord.san, \"O-O\", MatchOptions.BeginsWith),\n                                            RandBetween(10,25),\n                                        theCurrentNode.inactiveColorMoveRecord.sourceSquareOccupier in \"QBNP\", \n                                            RandBetween(0,15),\n\n                                        // default\n                                        0\n                                    ),\n\n                                // default\n                                0\n                            ),\n\n                            // ELSE\n                            Switch(comChessEngineFunctions.fME_getGamePhase(theCurrentNode.preMoveFEN),\n                                GAME_PHASE_OPENING,\n                                    Switch(true,\n                                        IsMatch(theCurrentNode.inactiveColorMoveRecord.san, \"O-O\", MatchOptions.BeginsWith),\n                                            RandBetween(-25,-10),\n                                        theCurrentNode.inactiveColorMoveRecord.sourceSquareOccupier in \"BNP\"  && Text(theCurrentNode.inactiveColorMoveRecord.moveDirection) in \"456\",\n                                            RandBetween(-15,0),\n                                            \n                                        // default\n                                        0\n                                    ),\n                                GAME_PHASE_MIDDLE,\n                                    Switch(true,\n                                        IsMatch(theCurrentNode.inactiveColorMoveRecord.san, \"O-O\", MatchOptions.BeginsWith),\n                                            RandBetween(-25,-10),\n                                        theCurrentNode.inactiveColorMoveRecord.sourceSquareOccupier in \"QBNP\",\n                                            RandBetween(-15,0),\n                                        \n                                        // default\n                                        0\n                                    ),\n\n                                // default\n                                0\n                            )\n                        ),\n                    heuristic19:\n                        RandBetween(-8,8)\n\n                })\n        });\n\n        UpdateIf(colPF_MOVE_TREE, nodeID=pNodeID, {\n            postMoveEvalRecord: \n                Patch(LookUp(colPF_MOVE_TREE, nodeID=pNodeID).postMoveEvalRecord, {\n                    centipawn:\n                        With(\n                            LookUp(colPF_MOVE_TREE, nodeID=pNodeID) As theCurrentNodeUpdated,\n                            \n                            If(gblPF_DEBUG_EVAL,\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic11: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic11\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic12: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic12\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic15: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic15\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic16: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic16\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic18: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic18\n                                });\n                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                                    \" heuristic19 the God of Randomness BONUS/PENALTY sub-total: \" & theCurrentNodeUpdated.postMoveEvalRecord.heuristic19\n                                })\n                            );\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic11 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic12 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic15 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic16 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic18 +\n                            theCurrentNodeUpdated.postMoveEvalRecord.heuristic19\n                        )\n                })\n        })\n    );\n\n    If(gblPF_DEBUG_EVAL,\n        With(\n            LookUp(colPF_MOVE_TREE, nodeID=pNodeID) As theCurrentNode,\n\n            Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \n                \" fCE_600(): san: \" & theCurrentNode.inactiveColorMoveRecord.san &\n                \" pacn: \" & theCurrentNode.inactiveColorMoveRecord.pacn &\n                \" centipawn: \" & theCurrentNode.postMoveEvalRecord.centipawn\n            })\n        )\n    )\n);\n\nIf(gblPF_DEBUG_EVAL,\n    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") & \" fCE_600(): exiting\"})\n)\n\n",
        "Property": "fCE_600",
        "RuleProviderType": "System"
      },
      {
        "Category": "Behavior",
        "InvariantScript": "If(gblPF_DEBUG_EVAL,\n    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n        \" comChessEngineFunctions.fCE_600_preEvaluate(): entering\"\n    })\n);\n\n\nWith(\n    {\n        d0Node:         LookUp(colPF_MOVE_TREE, nodeDepth=0),\n        dynamicData:    LookUp(colPF_DYNAMIC_DATA, dataName=DYNAMIC_DATA_PF_NAME)\n    } As theData,\n\nIf(gblPF_DEBUG_EVAL,\n    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n        \" comChessEngineFunctions.fCE_600_preEvaluate(): DEBUG is c3 attacked by BLACK ?\" &\n        \" c3 isAttacked?: \" & UDF_isSqNumAttacked(theData.d0Node.postMoveBoard, UDF_sqNameToSqNum(\"c3\"), BLACK) &\n        \" c3 isAttacked?: \" &\n            UDF_isSqNumAttacked(\n                UDF_setBitAtSqNum(theData.d0Node.postMoveBoard, EMPTY_FILLER_ABBR, UDF_sqNameToSqNum(\"c3\")),\n                UDF_sqNameToSqNum(\"c3\"), \n                BLACK\n            ) &\n        \" c3 isPAWNAttacked?: \" & UDF_isSqNumPAWNAttacked(theData.d0Node.postMoveBoard, UDF_sqNameToSqNum(\"c3\"), BLACK)\n    })\n);\n\n    UpdateIf(colPF_DYNAMIC_DATA, dataName=DYNAMIC_DATA_PF_NAME, {\n        evalData:   Patch(LookUp(colPF_DYNAMIC_DATA, dataName=DYNAMIC_DATA_PF_NAME).evalData, {\n                        theirHangingSquaresSet:\n                            UDF_createSetOfSqNames(\n                                Concat(\n                                    ForAll(\n                                        Sequence(64,0) As theSqNum,\n\n                                        If(UDF_getBitAtSqNum(theData.d0Node.postMoveBoard, theSqNum.Value) exactin UDF_getICPieceABBR(theData.d0Node.postMoveFEN, \"kqrbnp\"),\n                                            // THEN - check if it is protected (i.e., attacked by its own Color)\n                                            If(UDF_isSqNumAttacked(theData.d0Node.postMoveBoard, theSqNum.Value, UDF_FEN_TO_INACTIVE_COLOR(theData.d0Node.postMoveFEN)),\n                                                // THEN - not a weak square\n                                                \"\",\n\n                                                // ELSE - a weak square\n                                                UDF_sqNumToSqName(theSqNum.Value) & \" \"\n                                            )\n                                        )\n                                    ), Value\n                                )\n                            ),\n                        myHangingSquaresSet:\n                            UDF_createSetOfSqNames(\n                                Concat(\n                                    ForAll(\n                                        Sequence(64,0) As theSqNum,\n\n                                        If(UDF_getBitAtSqNum(theData.d0Node.postMoveBoard, theSqNum.Value) exactin UDF_getACPieceABBR(theData.d0Node.postMoveFEN, \"kqrbnp\"),\n                                            // THEN - check if it is protected (i.e., attacked by its own Color)\n                                            If(UDF_isSqNumAttacked(theData.d0Node.postMoveBoard, theSqNum.Value, UDF_FEN_TO_ACTIVE_COLOR(theData.d0Node.postMoveFEN)),\n                                                // THEN - not a weak square\n                                                \"\",\n\n                                                // ELSE - a weak square\n                                                UDF_sqNumToSqName(theSqNum.Value) & \" \"\n                                            )\n                                        )\n                                    ), Value\n                                )\n                            )\n                    })\n    })\n);\n\nIf(gblPF_DEBUG_EVAL,\n    With(\n        LookUp(colPF_DYNAMIC_DATA, dataName=DYNAMIC_DATA_PF_NAME) As theData,\n\n        Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n            \" comChessEngineFunctions.fCE_600_preEvaluate(): DEBUG\" &\n            \" myHangingSquaresSet: \" & theData.evalData.myHangingSquaresSet &\n            \" theirHangingSquaresSet: \" & theData.evalData.theirHangingSquaresSet\n        })\n    )\n);\n\nIf(gblPF_DEBUG_EVAL,\n    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n        \" comChessEngineFunctions.fCE_600_preEvaluate(): exiting\"\n    })\n);\n\n\n/*\n    ForAll(\n        Sequence(64, 0) As theSqNum,\n\n        With(\n            {\n                occupier:       UDF_getBitAtSqNum(theData.d0Node.postMoveBoard, theSqNum.Value),\n                isAttacked:     UDF_isSqNumAttacked(theData.d0Node.postMoveBoard, theSqNum.Value, UDF_FEN_TO_ACTIVE_COLOR(theData.d0Node.postMoveFEN)),\n                isProtected:    UDF_isSqNumAttacked(theData.d0Node.postMoveBoard, theSqNum.Value, UDF_FEN_TO_INACTIVE_COLOR(theData.d0Node.postMoveFEN)),\n        Switch(true,\n\n\n        PF_EVAL_DATA_RECORD={\n            myHangingSquaresSet:            BLANK_BOARD,\n            theirHangingSquaresSet:         BLANK_BOARD,\n            myStrongSquaresBoard:       BLANK_BOARD,\n            theirStrongSquaresBoard:    BLANK_BOARD\n        };\n        \n        DYNAMIC_DATA_PF_NAME=\"DYNAMIC_DATA_PF\";\n        \n        PF_DYNAMIC_DATA={\n            dataName:           DYNAMIC_DATA_PF_NAME,\n            chessEngineData:    PF_CHESS_ENGINE_DATA_RECORD,\n            uiData:             PF_UI_DATA_RECORD,\n            evalData:           PF_EVAL_DATA_RECORD\n        };\n */\n/*\nIf(gblPF_DEBUG_EVAL,\n    // THEN\n    With(\n        LookUp(colPF_DYNAMIC_DATA, dataName=DYNAMIC_DATA_PF_NAME) As theData,\n\n        With(\n            {\n                theCurrentMoveTreeNode: LookUp(colPF_MOVE_TREE, nodeID=pNodeID),\n                theParentMoveTreeNode:  LookUp(colPF_MOVE_TREE, nodeID=LookUp(colPF_MOVE_TREE, nodeID=pNodeID).parentNodeID),\n                theMoveHistoryTailNode:\n                    If(CountRows(colPF_MOVE_HISTORY)>=1,LookUp(colPF_MOVE_HISTORY, nodeID=theData.chessEngineData.moveHistoryTAILNodeID),Blank())\n            } As localVars,\n\n            Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                \" CountRows(colPF_MOVE_HISTORY): \" & CountRows(colPF_MOVE_HISTORY)\n            });\n            Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                \" current nodeID: \" & pNodeID &\n                \" pacn: \" & localVars.theCurrentMoveTreeNode.inactiveColorMoveRecord.pacn &\n                \" preMove-active color: \" & UDF_ColorToStr(UDF_FEN_TO_ACTIVE_COLOR(localVars.theCurrentMoveTreeNode.preMoveFEN)) &\n                \" postMovePINs: \" & localVars.theCurrentMoveTreeNode.postMovePINs\n            });\n            Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                \" parent nodeID: \" & If(IsBlank(localVars.theParentMoveTreeNode),\"Blank\", localVars.theParentMoveTreeNode.nodeID) &\n                \" pacn: \" & If(IsBlank(localVars.theParentMoveTreeNode),\"Blank\", localVars.theParentMoveTreeNode.inactiveColorMoveRecord.pacn) &\n                \" preMove-active color: \" &\n                    If(IsBlank(localVars.theParentMoveTreeNode),\"Blank\", UDF_ColorToStr(UDF_FEN_TO_ACTIVE_COLOR(localVars.theParentMoveTreeNode.preMoveFEN))) &\n                \" postMovePINs: \" & If(IsBlank(localVars.theParentMoveTreeNode),\"Blank\", localVars.theParentMoveTreeNode.postMovePINs)\n            });\n            Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                \" History tail nodeID: \" & If(IsBlank(localVars.theMoveHistoryTailNode),\"Blank\",localVars.theMoveHistoryTailNode.nodeID) &\n                \" pacn: \" &\n                    If(IsBlank(localVars.theMoveHistoryTailNode),\"Blank\",localVars.theMoveHistoryTailNode.inactiveColorMoveRecord.pacn) &\n                \" preMove-active color: \" &\n                    If(IsBlank(localVars.theMoveHistoryTailNode),\"Blank\",UDF_ColorToStr(UDF_FEN_TO_ACTIVE_COLOR(localVars.theMoveHistoryTailNode.preMoveFEN))) &\n                \" postMovePINs: \" & \n                    If(IsBlank(localVars.theMoveHistoryTailNode),\"Blank\",localVars.theMoveHistoryTailNode.postMovePINs)\n            })\n        )\n    )\n);\n\n\n\n\nWith(\n    LookUp(colPF_MOVE_TREE, nodeID=pNodeID) As theCurrentNode,\n\n    With(\n        {\n            postMoveBoard:      UDF_FEN_TO_BOARD(theCurrentNode.postMoveFEN)\n        } As localVars,\n\n        If(gblPF_DEBUG_EVAL,\n            // THEN\n            Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                \" pre-update whiteStrongSqBoard: \" & theCurrentNode.postMoveEvalRecord.whiteStrongSqBoard\n            });\n            Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                \" pre-update blackStrongSqBoard: \" & theCurrentNode.postMoveEvalRecord.blackStrongSqBoard\n            });\n            Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                \" postMoveBoard: \" & localVars.postMoveBoard\n            });\n            Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                \" postMovePINs: \" & theCurrentNode.postMovePINs\n            })\n        );\n\n        If(IsBlank(theCurrentNode.postMoveEvalRecord.whiteStrongSqBoard),\n            // THEN - need to populate the whiteStrongSqBoard board\n            With(\n                {\n                    whiteStrongSqNameList:\n                        Concat(\n                            Distinct(\n                                Sort(\n                                    Split(\n                                        Trim(\n                                            Concat(\n                                                ForAll(\n                                                    Sequence(64,0) As theSqNum,\n\n                                                    With(\n                                                        {\n                                                            moveBit: UDF_getBitAtSqNum(localVars.postMoveBoard,theSqNum.Value) \n                                                        } As theMoveBit,\n\n                                                        If(theMoveBit.moveBit=EMPTY_FILLER_ABBR || theMoveBit.moveBit exactin \"kqrbnp\",\n                                                            // THEN - there is no piece\n                                                            \"\",\n\n                                                            // THEN - we got a piece - get its' moves and filter them\n                                                            Concat(\n                                                                ForAll(\n                                                                    Filter(colPF_LEGAL_MOVES,\n                                                                        sqNum=theSqNum.Value &&\n                                                                        // the PAWN is case sensitive since it is uni-directional\n                                                                        pieceUpper= If(theMoveBit.moveBit in \"P\",theMoveBit.moveBit,Upper(theMoveBit.moveBit))\n                                                                    ) As theEligibleMove,\n\n                                                                    Switch(true,\n                                                                        // pawn forward moves do not capture therefore do not make strong squares\n                                                                        theMoveBit.moveBit in \"P\" && Text(theEligibleMove.theDirection) in \"15\",\n                                                                            \"\",\n\n                                                                        // castle moves do not capture therefore do not make strong squares\n                                                                        theEligibleMove.castle<>\"-\",\n                                                                            \"\",\n\n                                                                        // make sure slider squares are unoccupied\n                                                                        (!IsBlank(theEligibleMove.slideOvers)) &&\n                                                                            (!IsEmpty(\n                                                                                Filter(\n                                                                                    ForAll (\n                                                                                        Split(theEligibleMove.slideOvers, \" \") As theSlideOverSqName,\n                                                                    \n                                                                                        If(\n                                                                                            UDF_getBitAtSqNum(\n                                                                                                localVars.postMoveBoard, \n                                                                                                UDF_sqNameToSqNum(theSlideOverSqName.Value)\n                                                                                            ) in \"KQRBNP\", // any piece of any color in slide zone ?\n                                                                                            true,\n                                                                                            false\n                                                                                        )\n                                                                                    ), Value=true\n                                                                                )\n                                                                            )),\n                                                                            \"\",\n// /*\n//  * PIN rules\n// Rules:\n// to find PINs for preMove-active color look at the PINs in MOVE_TREE D0\n// to find PINs for preMove-inactive color look at the PINs in MOVE_HISTORY tail\n// - adjust if MOVE TREE D0 source square is in MOVE_HISTORY tail PIN list\n// -- if a MOVE_TREE D0 was a capture move - remove the MOVE TREE D0 source square from the MOVE_HISTORY tail PIN list\n// -- else replace the MOVE TREE D0 source square from the MOVE_HISTORY tail PIN list with the MOVE_TREE D0 target square\n//  * /\n                                                                        // default\n                                                                        theEligibleMove.eligibleSqName\n                                                                    )\n                                                                ), Value, \" \"\n                                                            )\n                                                        )\n                                                    )\n                                                ), Value, \" \"\n                                            )\n                                        ), \" \"\n                                    ), Value\n                                ), Value\n                            ), Value, \" \"\n                        )\n                } As theLists,\n\n                If(gblPF_DEBUG_EVAL,\n                    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                        \" comChessEngineFunctions.fME_prepNode(): DEBUG whiteStrongSqNameList: \" & theLists.whiteStrongSqNameList\n                    });\n                    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                        \" comChessEngineFunctions.fME_prepNode(): DEBUG postMovePINs: \" & theCurrentNode.postMovePINs &\n                        \" postMovePINDirections: \" & theCurrentNode.postMovePINDirections\n                    });\n                );\n\n                UpdateIf(colPF_MOVE_TREE, nodeID=pNodeID, {\n                    postMoveEvalRecord: \n                        Patch(theCurrentNode.postMoveEvalRecord, {\n                            whiteStrongSqBoard: Concat(\n                                                    ForAll(\n                                                        Sequence(64,0) As theSqNum,\n\n                                                        If(UDF_sqNumToSqName(theSqNum.Value) in theLists.whiteStrongSqNameList, ATTACKED_ABBR, EMPTY_FILLER_ABBR)\n                                                    ), Value, \"\"\n                                                )\n                        })\n                })\n            )\n        );\n\n        If(IsBlank(theCurrentNode.postMoveEvalRecord.blackStrongSqBoard),\n            // THEN - need to populate the blackStrongSqBoard board\n            With(\n                {\n                    blackStrongSqNameList:\n                        Concat(\n                            Distinct(\n                                Sort(\n                                    Split(\n                                        Trim(\n                                            Concat(\n                                                ForAll(\n                                                    Sequence(64,0) As theSqNum,\n\n                                                    With(\n                                                        {\n                                                            moveBit: UDF_getBitAtSqNum(localVars.postMoveBoard,theSqNum.Value) \n                                                        } As theMoveBit,\n\n                                                        If(theMoveBit.moveBit=EMPTY_FILLER_ABBR || theMoveBit.moveBit exactin \"KQRBNP\",\n                                                            // THEN - there is no piece\n                                                            \"\",\n\n                                                            // THEN - we got a piece - get its' moves and filter them\n                                                            Concat(\n                                                                ForAll(\n                                                                    Filter(colPF_LEGAL_MOVES,\n                                                                        sqNum=theSqNum.Value &&\n                                                                        // the PAWN is case sensitive since it is uni-directional\n                                                                        pieceUpper= If(theMoveBit.moveBit in \"P\",theMoveBit.moveBit,Upper(theMoveBit.moveBit))\n                                                                    ) As theEligibleMove,\n                                                                    \n                                                                    Switch(true,\n                                                                        // pawn forward moves do not capture therefore do not make strong squares\n                                                                        theMoveBit.moveBit in \"P\" && Text(theEligibleMove.theDirection) in \"15\",\n                                                                            \"\",\n\n                                                                        // castle moves do not capture therefore do not make strong squares\n                                                                        theEligibleMove.castle<>\"-\",\n                                                                            \"\",\n\n                                                                        // make sure slider squares are unoccupied\n                                                                        (!IsBlank(theEligibleMove.slideOvers)) &&\n                                                                            (!IsEmpty(\n                                                                                Filter(\n                                                                                    ForAll (\n                                                                                        Split(theEligibleMove.slideOvers, \" \") As theSlideOverSqName,\n                                                                    \n                                                                                        If(\n                                                                                            UDF_getBitAtSqNum(\n                                                                                                localVars.postMoveBoard, \n                                                                                                UDF_sqNameToSqNum(theSlideOverSqName.Value)\n                                                                                            ) in \"KQRBNP\", // any piece of any color in slide zone ?\n                                                                                            true,\n                                                                                            false\n                                                                                        )\n                                                                                    ), Value=true\n                                                                                )\n                                                                            )),\n                                                                            \"\",\n\n                                                                        // default\n                                                                        theEligibleMove.eligibleSqName\n                                                                    )\n                                                                ), Value, \" \"\n                                                            )\n                                                        )\n                                                    )\n                                                ), Value, \" \"\n                                            )\n                                        ), \" \"\n                                    ), Value\n                                ), Value\n                            ), Value, \" \"\n                        )\n                } As theLists,\n\n                If(gblPF_DEBUG_EVAL,\n                    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n                        \" comChessEngineFunctions.fME_prepNode(): DEBUG blackStrongSqList: \" & theLists.blackStrongSqNameList\n                    })\n                );\n\n                UpdateIf(colPF_MOVE_TREE, nodeID=pNodeID, {\n                    postMoveEvalRecord: \n                        Patch(theCurrentNode.postMoveEvalRecord, {\n                            blackStrongSqBoard: Concat(\n                                                    ForAll(\n                                                        Sequence(64,0) As theSqNum,\n\n                                                        If(UDF_sqNumToSqName(theSqNum.Value) in theLists.blackStrongSqNameList, ATTACKED_ABBR, EMPTY_FILLER_ABBR)\n                                                    ), Value, \"\"\n                                                )\n                        })\n                })\n            )\n        )\n    )\n);\n\nIf(gblPF_DEBUG_EVAL,\n    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n        \" comChessEngineFunctions.fME_prepNode(): exiting\"\n    })\n);\n\n */\n\n\n",
        "Property": "fCE_600_preEvaluate",
        "RuleProviderType": "System"
      },
      {
        "Category": "Behavior",
        "InvariantScript": "If(gblPF_DEBUG_EVAL,\n    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n        \" comChessEngineFunctions.fCE_600_postEvaluate(): entered\"\n    })\n);\n\n\n\n\n\nIf(gblPF_DEBUG_EVAL,\n    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), \"mm/dd/yyyy hh:mm:ss.fff\") &\n        \" comChessEngineFunctions.fCE_600_postEvaluate(): exiting\"\n    })\n);\n\n",
        "Property": "fCE_600_postEvaluate",
        "RuleProviderType": "System"
      }
    ]
  },
  "ComponentManifest": {
    "AllowAccessToGlobals": true,
    "AllowCustomization": true,
    "Description": "",
    "Name": "comChessEngineFunctions",
    "TemplateGuid": "8c2bb0b54c6149c580a48882153f6ad1"
  },
  "ComponentType": "CanvasComponent",
  "CustomGroupControlTemplateName": "",
  "CustomProperties": [
    {
      "Category": 2,
      "DisplayName": "fME_EvaluateMove",
      "Hidden": true,
      "Name": "fME_EvaluateMove",
      "PropertyDataTypeKey": "Void",
      "PropertyScopeKey": {
        "PropertyScopeRuleNamespaceKey": "4",
        "PropertyScopeRulesKey": [
          {
            "DisplayName": "fME_EvaluateMove_pNodeID",
            "Name": "fME_EvaluateMove_pNodeID",
            "PropertyDataTypeKey": "Number",
            "ScopeVariableInfo": {
              "DependencyType": "New",
              "Description": "Node ID holding the move to evaluate",
              "IsRequired": true,
              "ResolveExpands": false,
              "ResolveSelects": false,
              "ScopeVariableName": "pNodeID"
            },
            "Tooltip": "Node ID holding the move to evaluate",
            "Type": "{\"Version\":\"1.343\",\"Type\":{\"Name\":\"Root\",\"Kind\":\"Number\",\"EnumString\":\"\",\"Type\":[]}}"
          }
        ]
      },
      "Tooltip": "evaluate the move specified in the referenced node ID",
      "Type": "{\"Version\":\"1.343\",\"Type\":{\"Name\":\"Root\",\"Kind\":\"Void\",\"EnumString\":\"\",\"Type\":[]}}"
    },
    {
      "Category": 2,
      "DisplayName": "fCE_100",
      "Hidden": true,
      "Name": "fCE_100",
      "PropertyDataTypeKey": "Void",
      "PropertyScopeKey": {
        "PropertyScopeRuleNamespaceKey": "4",
        "PropertyScopeRulesKey": [
          {
            "DisplayName": "fCE_100_pNodeID",
            "Name": "fCE_100_pNodeID",
            "PropertyDataTypeKey": "Number",
            "ScopeVariableInfo": {
              "DependencyType": "New",
              "Description": "node ID",
              "IsRequired": true,
              "ResolveExpands": false,
              "ResolveSelects": false,
              "ScopeVariableName": "pNodeID"
            },
            "Tooltip": "node ID",
            "Type": "{\"Version\":\"1.343\",\"Type\":{\"Name\":\"Root\",\"Kind\":\"Number\",\"EnumString\":\"\",\"Type\":[]}}"
          }
        ]
      },
      "Tooltip": "random evaluate moves",
      "Type": "{\"Version\":\"1.343\",\"Type\":{\"Name\":\"Root\",\"Kind\":\"Void\",\"EnumString\":\"\",\"Type\":[]}}"
    },
    {
      "Category": 2,
      "DisplayName": "fCE_200",
      "Hidden": true,
      "Name": "fCE_200",
      "PropertyDataTypeKey": "Void",
      "PropertyScopeKey": {
        "PropertyScopeRuleNamespaceKey": "4",
        "PropertyScopeRulesKey": [
          {
            "DisplayName": "fCE_200_pNodeID",
            "Name": "fCE_200_pNodeID",
            "PropertyDataTypeKey": "Number",
            "ScopeVariableInfo": {
              "DependencyType": "New",
              "Description": "node ID",
              "IsRequired": true,
              "ResolveExpands": false,
              "ResolveSelects": false,
              "ScopeVariableName": "pNodeID"
            },
            "Tooltip": "node ID",
            "Type": "{\"Version\":\"1.343\",\"Type\":{\"Name\":\"Root\",\"Kind\":\"Number\",\"EnumString\":\"\",\"Type\":[]}}"
          }
        ]
      },
      "Tooltip": "capture whenever possible",
      "Type": "{\"Version\":\"1.343\",\"Type\":{\"Name\":\"Root\",\"Kind\":\"Void\",\"EnumString\":\"\",\"Type\":[]}}"
    },
    {
      "Category": 2,
      "DisplayName": "fCE_300",
      "Hidden": true,
      "Name": "fCE_300",
      "PropertyDataTypeKey": "Void",
      "PropertyScopeKey": {
        "PropertyScopeRuleNamespaceKey": "4",
        "PropertyScopeRulesKey": [
          {
            "DisplayName": "fCE_300_pNodeID",
            "Name": "fCE_300_pNodeID",
            "PropertyDataTypeKey": "Number",
            "ScopeVariableInfo": {
              "DependencyType": "New",
              "Description": "nodeID",
              "IsRequired": true,
              "ResolveExpands": false,
              "ResolveSelects": false,
              "ScopeVariableName": "pNodeID"
            },
            "Tooltip": "nodeID",
            "Type": "{\"Version\":\"1.343\",\"Type\":{\"Name\":\"Root\",\"Kind\":\"Number\",\"EnumString\":\"\",\"Type\":[]}}"
          }
        ]
      },
      "Tooltip": "A custom property",
      "Type": "{\"Version\":\"1.343\",\"Type\":{\"Name\":\"Root\",\"Kind\":\"Void\",\"EnumString\":\"\",\"Type\":[]}}"
    },
    {
      "Category": 2,
      "DisplayName": "fCE_400",
      "Hidden": true,
      "Name": "fCE_400",
      "PropertyDataTypeKey": "Void",
      "PropertyScopeKey": {
        "PropertyScopeRuleNamespaceKey": "4",
        "PropertyScopeRulesKey": [
          {
            "DisplayName": "fCE_400_pNodeID",
            "Name": "fCE_400_pNodeID",
            "PropertyDataTypeKey": "Number",
            "ScopeVariableInfo": {
              "DependencyType": "New",
              "Description": "node ID",
              "IsRequired": true,
              "ResolveExpands": false,
              "ResolveSelects": false,
              "ScopeVariableName": "pNodeID"
            },
            "Tooltip": "node ID",
            "Type": "{\"Version\":\"1.343\",\"Type\":{\"Name\":\"Root\",\"Kind\":\"Number\",\"EnumString\":\"\",\"Type\":[]}}"
          }
        ]
      },
      "Tooltip": "A custom property",
      "Type": "{\"Version\":\"1.343\",\"Type\":{\"Name\":\"Root\",\"Kind\":\"Void\",\"EnumString\":\"\",\"Type\":[]}}"
    },
    {
      "Category": 2,
      "DisplayName": "fME_getGamePhase",
      "Hidden": true,
      "Name": "fME_getGamePhase",
      "PropertyDataTypeKey": "Number",
      "PropertyScopeKey": {
        "PropertyScopeRuleNamespaceKey": "4",
        "PropertyScopeRulesKey": [
          {
            "DisplayName": "fME_getGamePhase_pFEN",
            "Name": "fME_getGamePhase_pFEN",
            "PropertyDataTypeKey": "String",
            "ScopeVariableInfo": {
              "DependencyType": "New",
              "Description": "FEN to evaulate game phase on",
              "IsRequired": true,
              "ResolveExpands": false,
              "ResolveSelects": false,
              "ScopeVariableName": "pFEN"
            },
            "Tooltip": "FEN to evaulate game phase on",
            "Type": "{\"Version\":\"1.343\",\"Type\":{\"Name\":\"Root\",\"Kind\":\"String\",\"EnumString\":\"\",\"Type\":[]}}"
          }
        ]
      },
      "Tooltip": "determine if OPENING, MIDDLE, or END game",
      "Type": "{\"Version\":\"1.343\",\"Type\":{\"Name\":\"Root\",\"Kind\":\"Number\",\"EnumString\":\"\",\"Type\":[]}}"
    },
    {
      "Category": 2,
      "DisplayName": "fME_END_GAME",
      "Hidden": true,
      "Name": "fME_END_GAME",
      "PropertyDataTypeKey": "Number",
      "PropertyScopeKey": {
        "PropertyScopeRuleNamespaceKey": "4",
        "PropertyScopeRulesKey": [
          {
            "DisplayName": "fME_END_GAME_pVersion",
            "Name": "fME_END_GAME_pVersion",
            "PropertyDataTypeKey": "Number",
            "ScopeVariableInfo": {
              "DependencyType": "New",
              "Description": "API version",
              "IsRequired": true,
              "ResolveExpands": false,
              "ResolveSelects": false,
              "ScopeVariableName": "pVersion"
            },
            "Tooltip": "API version",
            "Type": "{\"Version\":\"1.343\",\"Type\":{\"Name\":\"Root\",\"Kind\":\"Number\",\"EnumString\":\"\",\"Type\":[]}}"
          },
          {
            "DisplayName": "fME_END_GAME_pNodeID",
            "Name": "fME_END_GAME_pNodeID",
            "PropertyDataTypeKey": "Number",
            "ScopeVariableInfo": {
              "DependencyType": "New",
              "Description": "node containg the move to evaluate",
              "IsRequired": true,
              "ResolveExpands": false,
              "ResolveSelects": false,
              "ScopeVariableName": "pNodeID"
            },
            "Tooltip": "node containg the move to evaluate",
            "Type": "{\"Version\":\"1.343\",\"Type\":{\"Name\":\"Root\",\"Kind\":\"Number\",\"EnumString\":\"\",\"Type\":[]}}"
          }
        ]
      },
      "Tooltip": "evaulate move in END GAME",
      "Type": "{\"Version\":\"1.343\",\"Type\":{\"Name\":\"Root\",\"Kind\":\"Number\",\"EnumString\":\"\",\"Type\":[]}}"
    },
    {
      "Category": 2,
      "DisplayName": "fCE_500",
      "Hidden": true,
      "Name": "fCE_500",
      "PropertyDataTypeKey": "Void",
      "PropertyScopeKey": {
        "PropertyScopeRuleNamespaceKey": "4",
        "PropertyScopeRulesKey": [
          {
            "DisplayName": "fCE_500_pNodeID",
            "Name": "fCE_500_pNodeID",
            "PropertyDataTypeKey": "Number",
            "ScopeVariableInfo": {
              "DependencyType": "New",
              "Description": "reference node ID",
              "IsRequired": true,
              "ResolveExpands": false,
              "ResolveSelects": false,
              "ScopeVariableName": "pNodeID"
            },
            "Tooltip": "reference node ID",
            "Type": "{\"Version\":\"1.343\",\"Type\":{\"Name\":\"Root\",\"Kind\":\"Number\",\"EnumString\":\"\",\"Type\":[]}}"
          }
        ]
      },
      "Tooltip": "chess engine 500 level",
      "Type": "{\"Version\":\"1.343\",\"Type\":{\"Name\":\"Root\",\"Kind\":\"Void\",\"EnumString\":\"\",\"Type\":[]}}"
    },
    {
      "Category": 2,
      "DisplayName": "fCE_600",
      "Hidden": true,
      "Name": "fCE_600",
      "PropertyDataTypeKey": "Void",
      "PropertyScopeKey": {
        "PropertyScopeRuleNamespaceKey": "4",
        "PropertyScopeRulesKey": [
          {
            "DisplayName": "fCE_600_pNodeID",
            "Name": "fCE_600_pNodeID",
            "PropertyDataTypeKey": "Number",
            "ScopeVariableInfo": {
              "DependencyType": "New",
              "Description": "node to evalulate",
              "IsRequired": true,
              "ResolveExpands": false,
              "ResolveSelects": false,
              "ScopeVariableName": "pNodeID"
            },
            "Tooltip": "node to evalulate",
            "Type": "{\"Version\":\"1.343\",\"Type\":{\"Name\":\"Root\",\"Kind\":\"Number\",\"EnumString\":\"\",\"Type\":[]}}"
          }
        ]
      },
      "Tooltip": "chess engine move evalulator level 600",
      "Type": "{\"Version\":\"1.343\",\"Type\":{\"Name\":\"Root\",\"Kind\":\"Void\",\"EnumString\":\"\",\"Type\":[]}}"
    },
    {
      "Category": 2,
      "DisplayName": "fCE_600_preEvaluate",
      "Hidden": true,
      "Name": "fCE_600_preEvaluate",
      "PropertyDataTypeKey": "Void",
      "PropertyScopeKey": {
        "PropertyScopeRuleNamespaceKey": "4",
        "PropertyScopeRulesKey": []
      },
      "Tooltip": "board evaluation prior to move evals",
      "Type": "{\"Version\":\"1.343\",\"Type\":{\"Name\":\"Root\",\"Kind\":\"Void\",\"EnumString\":\"\",\"Type\":[]}}"
    },
    {
      "Category": 2,
      "DisplayName": "fCE_600_postEvaluate",
      "Hidden": true,
      "Name": "fCE_600_postEvaluate",
      "PropertyDataTypeKey": "Void",
      "PropertyScopeKey": {
        "PropertyScopeRuleNamespaceKey": "4",
        "PropertyScopeRulesKey": []
      },
      "Tooltip": "board evaluation after move evals",
      "Type": "{\"Version\":\"1.343\",\"Type\":{\"Name\":\"Root\",\"Kind\":\"Void\",\"EnumString\":\"\",\"Type\":[]}}"
    }
  ],
  "FirstParty": true,
  "Id": "http://microsoft.com/appmagic/Component",
  "IsComponentLocked": false,
  "IsComponentTemplate": true,
  "IsCustomGroupControlTemplate": false,
  "IsPcfControl": false,
  "IsPremiumPcfControl": false,
  "IsWidgetTemplate": false,
  "LastModifiedTimestamp": "638620228812395028",
  "Name": "8c2bb0b54c6149c580a48882153f6ad1",
  "OverridableProperties": {},
  "Version": "1.0"
}