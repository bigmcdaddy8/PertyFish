Diagnostics As screen:

    conEntireScreenDiagnostics As groupContainer.manualLayoutContainer:
        Height: =Parent.Height
        Width: =Parent.Width
        ZIndex: =1

        lblUDFDiagnosticsResult As label:
            Font: =Font.'Courier New'
            Size: =12
            Text: =lUDF_DIAGNOSTICS_RESULT
            Width: =500
            X: =btnRunUDFDiagnostics.X + btnRunUDFDiagnostics.Width + 10
            Y: =btnRunUDFDiagnostics.Y
            ZIndex: =1

        btnRunUDFDiagnostics As button:
            OnSelect: |-
                =
                
                
                If(gblPF_DEBUG_UDF_DIAGNOSTICS,
                    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), "mm/dd/yyyy hh:mm:ss.fff") &
                        " btnRunUDFDiagnostics.OnSelect(): entered"
                        
                    })
                );
                
                UpdateContext({lTEST_FAILURE_DETECTED: false});
                UpdateContext({lUDF_DIAGNOSTICS_RESULT: "RUNNING..."});
                
                
                If(!lTEST_FAILURE_DETECTED,
                    UpdateContext({lTEST_TEST_CATEGORY: "UDF_getSqNumAttackersMaterialCentipawn"});
                    UpdateContext({lTEST_TEST_NUMBER: 0});
                    UpdateContext({lTEST_TEST_NUMBER: lTEST_TEST_NUMBER + 1});
                
                    If(gblPF_DEBUG_UDF_DIAGNOSTICS,
                        Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), "mm/dd/yyyy hh:mm:ss.fff") &
                            " btnRunUDFDiagnostics.OnSelect(): lTEST_TEST_CATEGORY test #: " & lTEST_TEST_NUMBER
                        })
                    )
                );
                
                If(lTEST_FAILURE_DETECTED,
                    // THEN
                    If(gblPF_DEBUG_UDF_DIAGNOSTICS,
                        Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), "mm/dd/yyyy hh:mm:ss.fff") &
                            " btnRunUDFDiagnostics.OnSelect(): FAILURE " & lTEST_TEST_CATEGORY & " test #: " & lTEST_TEST_NUMBER
                        })
                    );
                    UpdateContext({lUDF_DIAGNOSTICS_RESULT: "FAILURE " & lTEST_TEST_CATEGORY & " test #: " & lTEST_TEST_NUMBER}),
                
                    // ELSE
                    UpdateContext({lUDF_DIAGNOSTICS_RESULT: "PASSED"})
                );
                
                If(gblPF_DEBUG_UDF_DIAGNOSTICS,
                    Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), "mm/dd/yyyy hh:mm:ss.fff") &
                        " btnRunUDFDiagnostics.OnSelect(): exiting"
                        
                    })
                );
                
                
                /*
                                        If(gblPF_TMP_Boolean01,
                                            // THEN
                                            Set(gblPF_TMP_Number01, gblPF_TMP_Number01 + 10);
                                            Set(gblPF_TMP_Text01, "8/2p3p1/1b1r1q1k/8/8/K1Q1R1B1/1P3P2/8 w - - 0 1");
                                            If(UDF_isSqNumPAWNProtected(
                                                gblPF_TMP_Text01, 
                                                UDF_sqNameToSqNum("b6"), 
                                                UDF_FEN_TO_INACTIVE_COLOR(gblPF_TMP_Text01)),
                                                // THEN - test passed
                                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), "mm/dd/yyyy hh:mm:ss.fff") &
                                                    " btnUDF_Tests_Set2_Code_CB.OnSelect(): test #" & gblPF_TMP_Number01 & " PASSED"
                                                    
                                                }),
                                        
                                                // ELSE - test failed
                                                Set(gblPF_TMP_Boolean01, false);
                                                Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), "mm/dd/yyyy hh:mm:ss.fff") & 
                                                    " btnUDF_Tests_Set2_Code_CB.OnSelect(): test #" & gblPF_TMP_Number01 & " FAILED"
                                                })
                                            );
                                        
                                            Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), "mm/dd/yyyy hh:mm:ss.fff") &
                                                " test #" & gblPF_TMP_Number01 & " DEBUG " &
                                                " UDF_getSqNumRelativeToSqNum(b6,1,1): " & UDF_getSqNumRelativeToSqNum(UDF_sqNameToSqNum("b6"),-1,1) &
                                                " UDF_getBitAtSqNum(): " &
                                                    UDF_getBitAtSqNum(
                                                        UDF_FEN_TO_BOARD(gblPF_TMP_Text01),
                                                        UDF_getSqNumRelativeToSqNum(UDF_sqNameToSqNum("b6"),-1,1)
                                                    ) &
                                                " UDF_getSqNumRelativeToSqNum(b6,1,1): " & UDF_getSqNumRelativeToSqNum(UDF_sqNameToSqNum("b6"),1,1) &
                                                " UDF_getBitAtSqNum(): " & 
                                                    UDF_getBitAtSqNum(
                                                        UDF_FEN_TO_BOARD(gblPF_TMP_Text01),
                                                        UDF_getSqNumRelativeToSqNum(UDF_sqNameToSqNum("b6"),1,1)
                                                    )
                                            });
                                            Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), "mm/dd/yyyy hh:mm:ss.fff") & 
                                                " DEBUG fen: " & LF & gblPF_TMP_Text01
                                            });
                                            Collect(colPF_logs, {logOffset: GET_LOG_INDEX, logEntry: Text(Now(), "mm/dd/yyyy hh:mm:ss.fff") & 
                                                " DEBUG UDF_FEN_TO_BOARD(fen): " & LF & UDF_FEN_TO_BOARD(gblPF_TMP_Text01)
                                            })
                                        );
                 */
            Size: =10
            Text: ="Run UDF Diagnostics"
            X: =40
            Y: =40
            ZIndex: =2

